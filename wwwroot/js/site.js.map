{"version":3,"sources":["node_modules/browser-pack/_prelude.js","CommonLibs/Web/LongPolling/JSClient/Client.ts","CommonLibs/Web/LongPolling/JSClient/HttpClient.ts","CommonLibs/Web/LongPolling/JSClient/WebSocketClient.ts","Views/Home/Index.ts"],"names":[],"mappings":"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","file":"site.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","﻿import * as sock from './WebSocketClient';\r\nimport * as http from './HttpClient';\r\n\r\nexport var HttpClient = http.HttpClient;\r\nexport var WebSocketClient = sock.WebSocketClient;\r\n\r\nexport interface Message\r\n{\r\n\ttype\t\t\t\t: string;\r\n\treply_to_type?\t\t: string;\r\n\tsender?\t\t\t\t: string;\r\n\tchained_messages?\t: Message[];\r\n}\r\n// Use this when members are not to be strictly enforced (behaves as a regular dictionary):\r\nexport interface MessageDict extends Message\r\n{\r\n\t[key:string]:any;\r\n}\r\n\r\nexport interface EventsHandler\r\n{\r\n\tbind\t: (name:string, callback:(evt?:any,p?:any)=>void)=>EventsHandler;\r\n\tunbind\t: (name:string, callback?:(evt?:any,p?:any)=>void)=>EventsHandler;\r\n\ttrigger\t: (name:string, p?:any)=>EventsHandler;\r\n}\r\n\r\nexport interface MessageHandler\r\n{\r\n\tstart\t\t\t\t\t: ()=>void;\r\n\tgetStatus\t\t\t\t: ()=>ClientStatus;\r\n\tgetSyncedHandlerUrl\t\t: ()=>string;\r\n\tonConnectionIdReceived\t: (callback:(connectionId:string)=>void)=>MessageHandler;\r\n\tonStatusChanged\t\t\t: (callback:(status:ClientStatus)=>void)=>MessageHandler;\r\n\tonInternalError\t\t\t: (callback:(message:string)=>void)=>MessageHandler;\r\n\tonMessageHandlerFailed\t: (callback:(error:any)=>void)=>MessageHandler;\r\n\tbind\t\t\t\t\t: (name:string, callback:(evt?:any,message?:Message)=>void)=>EventsHandler;\r\n\tunbind\t\t\t\t\t: (name:string, callback?:(evt?:any)=>void)=>EventsHandler;\r\n\tsendMessage\t\t\t\t: (message:Message, callback?:(evt?:any,message?:Message)=>void)=>MessageHandler;\r\n}\r\n\r\nexport enum ClientStatus\r\n{\r\n\tDISCONNECTED,\t// When the connection to the server is not yet established or is lost\r\n\tCONNECTED,\t\t// When there is a polling request currently connected to the server.\r\n\tPENDING,\t\t// (NB: Only used by HttpClient) When the message request is currently sending messages to the server and there are messages pending in the queue\r\n\tRUNNING,\t\t// (NB: Only used by HttpClient) When the message request is currently sending messages to the server.\r\n};\r\n\r\nexport function createEventHandler() : EventsHandler\r\n{\r\n\treturn $({});\r\n}\r\n\r\nexport function Client(p:{\tdebug?\t\t\t\t\t\t: boolean,\r\n\t\t\t\t\t\t\thttpHandlerUrl?\t\t\t\t: string,\r\n\t\t\t\t\t\t\twebSocketHandlerUrl?\t\t: string,\r\n\t\t\t\t\t\t\twebSocketKeepAliveUrl?\t\t: string,\r\n\t\t\t\t\t\t\twebSocketKeepAliveTimeout?\t: number,\r\n\t\t\t\t\t\t\tsyncedHandlerUrl?\t\t\t: string,\r\n\t\t\t\t\t\t\tlogoutUrl\t\t\t\t\t: string\r\n\t\t\t\t\t}) : MessageHandler\r\n{\r\n\tvar canUseSocket : boolean = (p.webSocketHandlerUrl != null);\r\n\tcanUseSocket = ( canUseSocket && (typeof(WebSocket) != 'undefined') );\r\n\tvar canUseHttp : boolean = (p.httpHandlerUrl != null);\r\n\r\n\tif( p.debug )\r\n\t{\r\n\t\t// Check that console is available\r\n\t\tif( (typeof(console) == 'undefined') || (typeof(console.log) == 'undefined') )\r\n\t\t\t// Debugging not available\r\n\t\t\tp.debug = false;\r\n\t}\r\n\r\n\tif( canUseSocket )\r\n\t{\r\n\t\treturn new sock.WebSocketClient({ debug:p.debug, handlerUrl:p.webSocketHandlerUrl, keepAliveUrl:p.webSocketKeepAliveUrl, keepAliveTimeout:p.webSocketKeepAliveTimeout, syncedHandlerUrl:p.syncedHandlerUrl, logoutUrl:p.logoutUrl });\r\n\t}\r\n\telse if( canUseHttp )\r\n\t{\r\n\t\tvar client = http.HttpClient( p.httpHandlerUrl, p.syncedHandlerUrl, p.logoutUrl );\r\n\r\n\t\t// TODO: Alain: Cleanup 'HttpClient' & include 'sendMessage(message, callback)'\r\n\r\n\t\t// Override 'client.sendMessage()' to support a second argument: 'callback'\r\n\t\tvar sendMessageUid = 0;\r\n\t\tvar baseSendMessage = client.sendMessage;\r\n\t\tclient.sendMessage = function(message:Message, callback:any)\r\n\t\t\t{\r\n\t\t\t\tif( callback != null )\r\n\t\t\t\t{\r\n\t\t\t\t\t// Attach the callback to a new one-shot message handler\r\n\t\t\t\t\tvar replyMessageHandler = 'commonlibs_message_handler_autoreply_' + (++ sendMessageUid);\r\n\t\t\t\t\tmessage[ 'reply_to_type' ] = replyMessageHandler;\r\n\r\n\t\t\t\t\tclient.bind( replyMessageHandler, function(evt:any, message:Message)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// The message has returned => unbind the one-shot message handler\r\n\t\t\t\t\t\t\tclient.unbind( replyMessageHandler );\r\n\r\n\t\t\t\t\t\t\t// Forward the message to the callback\r\n\t\t\t\t\t\t\tcallback( evt, message );\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Invoke original 'sendMessage()' function\r\n\t\t\t\tbaseSendMessage( message );\r\n\t\t\t};\r\n\r\n\t\treturn client;\r\n\t}\r\n\telse\r\n\t{\r\n\t\tsock.error( 'Unable to find a suitable message handler protocol' );  // NB: Temporarily use the same error handler (until the whole 'utils.*.ts' are merged)\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport default Client;\r\n","﻿//\r\n// CommonLibs/Web/LongPolling/JSClient/HttpClient.ts\r\n//\r\n// Author:\r\n//   Alain CAO (alaincao17@gmail.com)\r\n//\r\n// Copyright (c) 2010 - 2018 Alain CAO\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining\r\n// a copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to\r\n// permit persons to whom the Software is furnished to do so, subject to\r\n// the following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be\r\n// included in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\r\n// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\r\n// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n//\r\n\r\n// TODO: ACA: HttpClient: Rewrite in clean TypeScript !!!\r\n\r\nimport { Message, ClientStatus } from './Client';\r\n\r\ndeclare var $: any;\r\n\r\nexport function HttpClient(handlerUrl:string, syncedHandlerUrl:string, logoutUrl:string)\r\n{\r\n\tvar $this = $(this);\r\n\tthis.$this = $this;\r\n\tvar thisDOM = this;\r\n\r\n\t///////////////////////////\r\n\t// Reserved event names: //\r\n\t///////////////////////////\r\n\r\n\t// Bind to this event to be warned of changes in the connection status\r\n\t// Event parameter:\t'CONNECTED' when there is a polling request currently connected to the server.\r\n\t//\t\t\t\t\t'DISCONNECTED' when the connection to the server is lost (NB: Try run the 'verifyConnections()' method to try to reconnect to the server).\r\n\t//\t\t\t\t\t'RUNNING' when the message request is currently sending messages to the server.\r\n\t//\t\t\t\t\t'PENDING' when the message request is currently sending messages to the server and there are messages pending in the queue\r\n\t$this.statusChangedEvent = \"long_polling_client_status_changed\";\r\n\r\n\t// Bind to this event to receive errors when an assigned message handler threw an exception.\r\n\t// Event parameter: The error object threw by the assigned message handler as receivd by the catch().\r\n\t$this.messageHandlerFailedEvent = 'message_handler_failed';\r\n\r\n\t// Bind to this event to get error messages when an internal error occures inside the LongPollingClient object\r\n\t// Event parameter: A description string of the error\r\n\t$this.internalErrorEvent = 'long_polling_client_error';\r\n\r\n\t// Bind to this event to receive the ConnectionID that has been assigned to this LongPollingClient as soon as it has been received\r\n\t// Event parameter: The ConnectionID (string)\r\n\t$this.connectionIDReceivedEvent = 'long_polling_client_connection_id';\r\n\r\n\t///////////////////////\r\n\t// Member variables: //\r\n\t///////////////////////\r\n\r\n\tthis.__status\t\t\t\t\t= ClientStatus.DISCONNECTED;\r\n\r\n\t// URL of the server-side message handler\r\n\tthis.__handlerUrl\t\t\t\t= handlerUrl;\r\n\t// URL of the server-side synced handler\r\n\tthis.__syncedHandlerUrl\t\t\t= syncedHandlerUrl;\r\n\t// URL of the logout page\r\n\tthis.__logoutUrl\t\t\t\t= logoutUrl;\r\n\r\n\t// The only 2 HTTP requests that can be running at the same time:\r\n\tthis.__pollingRequest\t\t\t= null;\r\n\tthis.__messageRequest\t\t\t= null;\r\n\r\n\t// This client's SenderID\r\n\tthis.__connectionID\t\t\t\t= null;\r\n\r\n\t// The list of messages that are waiting for the __messageRequest to be available\r\n\tthis.__pendingMessages\t\t\t= null;\r\n\r\n\t//////////////\r\n\t// Methods: //\r\n\t//////////////\r\n\r\n\tthis.getSyncedHandlerUrl = function()\r\n\t{\r\n\t\treturn this.__syncedHandlerUrl;\r\n\t}\r\n\r\n\tthis.getStatus = function()\r\n\t{\r\n\t\tvar newStatus;\r\n\t\tif( this.__pollingRequest == null )\r\n\t\t{\r\n\t\t\tnewStatus = ClientStatus.DISCONNECTED;\r\n\t\t}\r\n\t\telse if( this.__messageRequest != null )\r\n\t\t{\r\n\t\t\tif( this.__pendingMessages != null )\r\n\t\t\t\tnewStatus = ClientStatus.PENDING;\r\n\t\t\telse\r\n\t\t\t\tnewStatus = ClientStatus.RUNNING;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tnewStatus = ClientStatus.CONNECTED;\r\n\t\t}\r\n\r\n\t\tif( this.__status != newStatus )\r\n\t\t{\r\n\t\t\tthis.__status = newStatus;\r\n\t\t\ttry { this.$this.trigger( this.$this.statusChangedEvent, newStatus ); } catch(err) {}\r\n\t\t}\r\n\t\treturn newStatus;\r\n\t}\r\n\r\n\tthis.onConnectionIdReceived = function(callback:(cid:string)=>void)\r\n\t{\r\n\t\tif( this.__connectionID != null )\r\n\t\t{\r\n\t\t\t// There is already a ConnectionID => Invoke callback right now\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tcallback( this.__connectionID );\r\n\t\t\t} catch( err ) {\r\n\t\t\t\t// The assigned message handler threw an exception\r\n\t\t\t\ttry { this.$this.trigger( this.messageHandlerFailedEvent, err ); } catch(err) {}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t// The ConnectionID is not received yet => Bind the callback to the 'connectionIDReceivedEvent' trigger\r\n\t\t\tthis.$this.bind( this.$this.connectionIDReceivedEvent, (function(cb)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn function(evt:any,connectionID:string)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tcb( connectionID );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})(callback) );\r\n\t\t}\r\n\t}\r\n\r\n\tthis.verifyConnections = function()\r\n\t{\r\n\t\tvar message : any;\r\n\r\n\t\tif( this.__pollingRequest == null )\r\n\t\t{\r\n\t\t\t// The polling request must be (re)started => Send a simple poll request\r\n//console.log( 'POLL' );\r\n\t\t\tmessage = {\t'type': 'poll',\r\n\t\t\t\t\t\t'sender': this.__connectionID };\r\n\t\t\tthis.__pollingRequest = new XMLHttpRequest();\r\n\t\t\tthis.__send( this.__pollingRequest, message );\r\n\t\t}\r\n\t\tif( this.__messageRequest == null )\r\n\t\t{\r\n\t\t\t// There is no request currently running\r\n\r\n\t\t\tif( this.__pendingMessages == null )\r\n\t\t\t\t// No pending message\r\n\t\t\t\treturn;\r\n\t\t\tif( this.__connectionID == null )\r\n\t\t\t\t// No ConnectionID available yet (wait for init() to terminate...)\r\n\t\t\t\treturn;\r\n\r\n\t\t\t// Create message list with all the pending messages\r\n\t\t\tvar messageContents = [];\r\n\t\t\tfor( var i=0; i<this.__pendingMessages.length; ++i )\r\n\t\t\t{\r\n\t\t\t\tvar messageItem = this.__pendingMessages[ i ];\r\n\r\n\t\t\t\t// Add message content to send\r\n\t\t\t\tmessage = messageItem[ 'content' ];\r\n\t\t\t\tmessageContents.push( message );\r\n//console.log( 'SND', message );\r\n\t\t\t}\r\n\r\n\t\t\t// Send message\r\n\t\t\tmessage = {\t'type': 'messages',\r\n\t\t\t\t\t\t'sender': this.__connectionID,\r\n\t\t\t\t\t\t'messages': messageContents };\r\n\t\t\tthis.__messageRequest = new XMLHttpRequest();\r\n\t\t\tthis.__send( this.__messageRequest, message );\r\n\t\t\tthis.__pendingMessages = null;  // No more pending messages\r\n\t\t}\r\n\t}\r\n\r\n\tthis.sendMessages = function(messages:Message[])\r\n\t{\r\n\t\tif( this.__pendingMessages == null )\r\n\t\t\tthis.__pendingMessages = [];\r\n\r\n\t\tfor( var i=0; i<messages.length; ++i )\r\n\t\t{\r\n\t\t\tvar messageItem = { 'content': messages[i] };\r\n\t\t\tthis.__pendingMessages.push( messageItem );\r\n\t\t}\r\n\r\n\t\t// Send pending messages if the request is available\r\n\t\tthis.verifyConnections();\r\n\t\tthis.getStatus();\r\n\t}\r\n\r\n\tthis.start = function()\r\n\t{\r\n\t\tvar self = this;\r\n\r\n\t\t// Start the __pollingRequest\r\n\t\tvar message = { 'type': 'init' };\r\n\t\tvar pendingQuery = new XMLHttpRequest();\r\n\t\tself.__pollingRequest = pendingQuery;  // Assign this member immediately so that 'verifyConnections()' doesn't create its own query\r\n\t\tvar sendRequestFunction = function()\r\n\t\t\t{\r\n\t\t\t\tself.__send( pendingQuery, message );\r\n\t\t\t};\r\n\r\n//\t\tif( $.browser.safari || $.browser.opera )\r\n//\t\t{\r\n//\t\t\t// Opera & Safari thinks the page is still loading until all the initial requests are terminated (which never happens in case of a long-polling...)\r\n//\t\t\t// => Those browsers shows the 'turning wait icon' indefinitely (Safari) or even worse never show the page! (Opera)\r\n\r\n//\t\t\t// Add a delay before sending the initial long-polling query\r\n//\t\t\tself.$this.delay( 300 ).queue( function(){ sendRequestFunction(); } );\r\n//\t\t}\r\n//\t\telse\r\n//\t\t{\r\n\t\t\t// Other browsers => sending the initial long-polling query immediately\r\n\t\t\tsendRequestFunction();\r\n//\t\t}\r\n\r\n\t\t$(window).on( 'unload', function()\r\n\t\t\t{\r\n\t\t\t\t// When leaving the page, explicitly abort the polling requests because IE keeps them alive!!!\r\n\t\t\t\ttry { self.__pollingRequest.abort(); }\r\n\t\t\t\tcatch( err ) {}\r\n\r\n\t\t\t\t// Kill also the \"request\" request if any\r\n\t\t\t\ttry { self.__messageRequest.abort(); }\r\n\t\t\t\tcatch( err ) {}\r\n\t\t\t} );\r\n\t}\r\n\r\n\tthis.__send = function(requestObject:XMLHttpRequest, messageObject:Message)\r\n\t{\r\n\t\tvar strMessageObject = JSON.stringify( messageObject );\r\n\t\trequestObject.open( \"POST\", this.__handlerUrl, true );\r\n\t\trequestObject.setRequestHeader( \"Content-Type\", \"application/x-www-form-urlencoded\" );\r\n\r\n\t\tvar callback = (function(self,req) {\r\n\t\t\t\treturn function() { self.__onRequestStateChange(req); };\r\n\t\t\t})( this, requestObject );\r\n\t\trequestObject.onreadystatechange = callback;\r\n\r\n\t\trequestObject.send( strMessageObject );\r\n\t};\r\n\r\n\tthis.__onRequestStateChange = function(request:XMLHttpRequest)\r\n\t{\r\n\t\ttry\r\n\t\t{\r\n\t\t\tif( request.readyState == 4 )\r\n\t\t\t{\r\n\t\t\t\tif( request == this.__pollingRequest )\r\n\t\t\t\t{\r\n\t\t\t\t\t// The __pollingRequest ended\r\n\t\t\t\t\tthis.__pollingRequest = null;\r\n\t\t\t\t}\r\n\t\t\t\telse if( request == this.__messageRequest )\r\n\t\t\t\t{\r\n\t\t\t\t\t// The __messageRequest ended\r\n\t\t\t\t\tthis.__messageRequest = null;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\ttry { this.$this.trigger( this.$this.internalErrorEvent, 'Received a response from an unknown request' ); } catch(err) {}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif( request.status == 200 )  // HTTP 200 OK\r\n\t\t\t\t{\r\n\t\t\t\t\tvar strResponse = request.responseText;\r\n\t\t\t\t\tvar response;\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tresponse = JSON.parse( strResponse );\r\n\t\t\t\t\t\tvar responseType = response[ 'type' ];\r\n\t\t\t\t\t\tif( responseType == 'init' )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.__connectionID = response[ 'sender' ];\r\n//console.log( 'CID', this.__connectionID );\r\n\r\n\t\t\t\t\t\t\ttry\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.$this.trigger( this.$this.connectionIDReceivedEvent, this.__connectionID );\r\n\t\t\t\t\t\t\t} catch( err ) {\r\n\t\t\t\t\t\t\t\t// The assigned message handler threw an exception\r\n\t\t\t\t\t\t\t\ttry { this.$this.trigger( this.$this.messageHandlerFailedEvent, err ); } catch(err) {}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Initiate initial connection\r\n\t\t\t\t\t\t\tthis.verifyConnections();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if( responseType == 'reset' )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// Restart the __pollingRequest\r\n\t\t\t\t\t\t\tthis.verifyConnections();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if( responseType == 'logout' )\r\n\t\t\t\t\t\t{\r\n//console.log( 'LOGOUT' );\r\n\t\t\t\t\t\t\twindow.location.href = this.__logoutUrl;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if( responseType == 'messages' )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar messagesList = response[ 'messages' ];\r\n\t\t\t\t\t\t\tfor( var i=0; i<messagesList.length; ++i )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttry\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar messageContent = messagesList[ i ];\r\n\t\t\t\t\t\t\t\t\tvar type = messageContent[ 'type' ];\r\n//console.log( 'RCV', messageContent );\r\n\t\t\t\t\t\t\t\t\tthis.$this.trigger( type, messageContent );\r\n\t\t\t\t\t\t\t\t} catch( err ) {\r\n\t\t\t\t\t\t\t\t\t// The assigned message handler threw an exception\r\n\t\t\t\t\t\t\t\t\ttry { this.$this.trigger( this.$this.messageHandlerFailedEvent, err ); } catch(err) {}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.verifyConnections();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthrow 'Unknown response type \\'' + responseType + '\\'';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch( err ) {\r\n\t\t\t\t\t\ttry { this.$this.trigger( this.$this.internalErrorEvent, 'JSON Parse Error: ' + err ); } catch(err) {}\r\n\t\t\t\t\t\tthis.verifyConnections();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if( (request.status == 0/*All browsers*/) || (request.status == 12031/*Only IE*/) )\r\n\t\t\t\t{\r\n\t\t\t\t\t// Request aborted (e.g. redirecting to another page)\r\n\t\t\t\t\t// this.verifyConnections();  <= Don't try to reconnect\r\n\t\t\t\t}\r\n\t\t\t\telse if( request.status == 12002/*Only IE*/ )\r\n\t\t\t\t{\r\n\t\t\t\t\t// Request timeout\r\n//console.log( '__onRequestStateChange - request.status=12002 (timeout)' );\r\n// TODO: Alain: Warning (?)\r\n\t\t\t\t\tthis.verifyConnections();  // Try reconnect\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\ttry { this.$this.trigger( this.$this.internalErrorEvent, 'Server error (status=\"' + request.status + '\")' ); } catch(err) {}\r\n// TODO: Alain: Maximum number of retry then definitely disconnect\r\n\t\t\t\t\t//window.location = this.__logoutUrl;  // Redirect to logout page\r\n\t\t\t\t\tthis.verifyConnections();  // Try reconnect\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// \"readyState != 4\" == still running\r\n\t\t\t\t// NOOP\r\n\t\t\t}\r\n\t\t}\r\n\t\tfinally\r\n\t\t{\r\n\t\t\tthis.getStatus();\r\n\t\t}\r\n\t};\r\n\r\n\t////////////////////////////////////////////////////////////////\r\n\t// Redirected functions 'jquery object' => 'original object': //\r\n\t////////////////////////////////////////////////////////////////\r\n\r\n\t$this.start\t\t\t\t\t\t= function() { thisDOM.start(); };\r\n\t$this.getSyncedHandlerUrl\t\t= function() { return thisDOM.getSyncedHandlerUrl(); };\r\n\t$this.getStatus\t\t\t\t\t= function() { return thisDOM.getStatus(); };\r\n\t$this.sendMessage\t\t\t\t= function(message:Message) { thisDOM.sendMessages( [message] ); };\r\n\t$this.sendMessages\t\t\t\t= function(messages:Message[]) { thisDOM.sendMessages( messages ); };\r\n\t$this.verifyConnections\t\t\t= function() { thisDOM.verifyConnections(); };\r\n\r\n\t/////////////////////////////////////\r\n\t// Implement Client.MessageHandler //\r\n\t/////////////////////////////////////\r\n\r\n\t$this.onConnectionIdReceived = function(callback:(cid:string)=>void)\r\n\t\t{\r\n\t\t\tthisDOM.onConnectionIdReceived(callback);\r\n\t\t\treturn $this;\r\n\t\t};\r\n\t$this.onStatusChanged = function(callback:(status:ClientStatus)=>void)\r\n\t\t{\r\n\t\t\t$this.bind( $this.statusChangedEvent, function(evt:any, status:ClientStatus)\r\n\t\t\t\t{\r\n\t\t\t\t\tcallback( status );\r\n\t\t\t\t} );\r\n\t\t\treturn $this;\r\n\t\t};\r\n\t$this.onInternalError = function(callback:(message:string)=>void)\r\n\t\t{\r\n\t\t\t$this.bind( $this.internalErrorEvent, function(e:any,message:string)\r\n\t\t\t\t{\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcallback(message);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch(err)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// NB: Really not much we can do here ...\r\n\t\t\t\t\t\tif( (console != null) && (console.error != null) )\r\n\t\t\t\t\t\t\tconsole.error( 'Error while invoking long_polling_client_error event', err );\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t\treturn $this;\r\n\t\t};\r\n\t$this.onMessageHandlerFailed = function(callback:(message:string)=>void)\r\n\t\t{\r\n\t\t\t$this.bind( $this.messageHandlerFailedEvent, function(evt:any,error:any)\r\n\t\t\t\t{\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcallback(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch(err)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$this.trigger( $this.internalErrorEvent, 'Error while invoking message_handler_failed event: '+err );\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t\treturn $this;\r\n\t\t};\r\n\r\n\t/////////////////////\r\n\t// Initialization: //\r\n\t/////////////////////\r\n\r\n\t// Return the JQuery object\r\n\treturn $this;\r\n}\r\n\r\nexport default HttpClient;\r\n","﻿//\r\n// CommonLibs/Web/LongPolling/JSClient/WebSocketClient.ts\r\n//\r\n// Author:\r\n//   Alain CAO (alain.cao@sigmaconso.com)\r\n//\r\n// Copyright (c) 2018 SigmaConso\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining\r\n// a copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to\r\n// permit persons to whom the Software is furnished to do so, subject to\r\n// the following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be\r\n// included in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\r\n// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\r\n// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n//\r\n\r\nimport { MessageHandler, EventsHandler, ClientStatus, Message, createEventHandler } from \"./Client\";\r\n\r\ndeclare var $: any;\r\n\r\nexport function error(message:string)\r\n{\r\n\talert( message );\r\n\tthrow message;\r\n}\r\n\r\nexport class WebSocketClient implements MessageHandler\r\n{\r\n\tprivate\tevents\t\t\t\t: EventsHandler;\r\n\tpublic\tdebug\t\t\t\t: boolean;\r\n\r\n\tprivate\thandlerUrl\t\t\t: string;\r\n\tprivate\tlogoutUrl\t\t\t: string;\r\n\tprivate\tkeepAliveUrl\t\t: string;\r\n\tprivate\tkeepAliveTimeout\t: number;\r\n\tprivate\tkeepAliveTimer\t\t: number;\r\n\tprivate\tsyncedHandlerUrl\t: string;\r\n\tprivate\tstatus\t\t\t\t: ClientStatus;\r\n\tprivate\tconnectionId\t\t: string;\r\n\tprivate\twebSocket\t\t\t: WebSocket;\r\n\tprivate\tsendMessageUid\t\t: number;\r\n\tprivate\tpendingMessages\t\t: { message:Message, callback?:(evt?:any,message?:Message)=>void }[];\r\n\r\n\tpublic\tstart\t\t\t\t\t\t: ()=>void;\r\n\tpublic\tsendMessage\t\t\t\t\t: (message:Message, callback?:(evt?:any,message?:Message)=>void)=>WebSocketClient;\r\n\tprivate sendPendingMessages\t\t\t: ()=>void;\r\n\tpublic\tgetConnectionId\t\t\t\t: ()=>string;\r\n\tpublic\tgetStatus\t\t\t\t\t: ()=>ClientStatus;\r\n\tprivate\tcheckKeepAliveTimeout\t\t: ()=>void;\r\n\tpublic\tgetSyncedHandlerUrl\t\t\t: ()=>string;\r\n\r\n\t// For EventsHandler:\r\n\tpublic\tbind\t\t\t\t\t\t: (name:string, callback:(evt?:any,message?:Message)=>void)=>EventsHandler;\r\n\tpublic\tunbind\t\t\t\t\t\t: (name:string, callback?:(evt?:any)=>void)=>EventsHandler;\r\n\tpublic\ttrigger\t\t\t\t\t\t: (name:string, p?:any)=>EventsHandler;\r\n\r\n\t// Events:\r\n\tprivate\ttriggerStatusChanged\t\t: (status:ClientStatus)=>void;\r\n\tpublic\tonStatusChanged\t\t\t\t: (callback:(status:ClientStatus)=>void)=>WebSocketClient;\r\n\tprivate\ttriggerInternalError\t\t: (message:string)=>void;\r\n\tpublic\tonInternalError\t\t\t\t: (callback:(message:string)=>void)=>WebSocketClient;\r\n\tprivate\ttriggerMessageHandlerFailed\t: (error:any)=>void;\r\n\tpublic\tonMessageHandlerFailed\t\t: (callback:(error:any)=>void)=>WebSocketClient;\r\n\tprivate\ttriggerConnectionIdReceived : (connectionId:string)=>void;\r\n\tpublic\tonConnectionIdReceived\t\t: (callback:(connectionId:string)=>void)=>WebSocketClient;\r\n\r\n\tconstructor(p:{\tdebug?\t\t\t\t: boolean,\r\n\t\t\t\t\thandlerUrl\t\t\t: string,\t// Required: The URL of the server's WebSocket listener\r\n\t\t\t\t\tkeepAliveUrl?\t\t: string,\t// Optional: Set to create a dummy HTTP request to keep the ASP.NET session alive\r\n\t\t\t\t\tkeepAliveTimeout?\t: number,\t// Optional: If 'keepAliveUrl' is set, this will be the interval between the dummy HTTP requests (default: 10*60*1000 miliseconds = 10 minutes)\r\n\t\t\t\t\tlogoutUrl\t\t\t: string,\t// Required: The URL to redirect to when the server asks to logout\r\n\t\t\t\t\tsyncedHandlerUrl?\t: string })\t// Optional: The URL to the Synced HTTP handler if used (e.g. file uploads)\r\n\t{\r\n\t\tp = $.extend( {\tdebug\t\t\t\t: false,\r\n\t\t\t\t\t\thandlerUrl\t\t\t: 'HANDLER_URL_UNDEFINED',\r\n\t\t\t\t\t\tkeepAliveUrl\t\t: null,\r\n\t\t\t\t\t\tkeepAliveTimeout\t: 600000,\r\n\t\t\t\t\t\tlogoutUrl\t\t\t: 'LOGOUT_URL_UNDEFINED',\r\n\t\t\t\t\t\tsyncedHandlerUrl\t: null,\r\n\t\t\t\t\t}, p );\r\n\t\tvar self = this;\r\n\r\n\t\tself.events\t\t\t\t= createEventHandler();\r\n\t\tself.debug\t\t\t\t= (p.debug == true);\r\n\t\tself.handlerUrl\t\t\t= p.handlerUrl;\r\n\t\tself.keepAliveUrl\t\t= p.keepAliveUrl;\r\n\t\tself.keepAliveTimeout\t= p.keepAliveTimeout;\r\n\t\tself.keepAliveTimer\t\t= null;\r\n\t\tself.logoutUrl\t\t\t= p.logoutUrl;\r\n\t\tself.syncedHandlerUrl\t= p.syncedHandlerUrl;\r\n\t\tself.status\t\t\t\t= ClientStatus.DISCONNECTED;\r\n\t\tself.connectionId\t\t= null;\r\n\t\tself.webSocket\t\t\t= null;\r\n\t\tself.sendMessageUid\t\t= 0;\r\n\t\tself.pendingMessages\t= [];\r\n\r\n\t\t// Redirect jQuery's methods to 'self.events'\r\n\t\tself.bind\t\t\t\t\t\t= function(){ return self.events.bind.apply( self.events, arguments ); };\r\n\t\tself.unbind\t\t\t\t\t\t= function(){ return self.events.unbind.apply( self.events, arguments ); };\r\n\t\tself.trigger\t\t\t\t\t= function(){ return self.events.trigger.apply( self.events, arguments ); };\r\n\r\n\t\t// Misc\r\n\t\tself.getSyncedHandlerUrl = function(){ return self.syncedHandlerUrl; };\r\n\r\n\t\t// Init event handlers\r\n\r\n\t\tself.triggerInternalError = function(message:string)\r\n\t\t\t{\r\n\t\t\t\tself.events.trigger( 'long_polling_client_error', message );\r\n\t\t\t};\r\n\t\tself.onInternalError = function(callback:(message:string)=>void)\r\n\t\t\t{\r\n\t\t\t\tself.events.bind( 'long_polling_client_error', function(e,message:string)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttry\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcallback(message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcatch(err)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// NB: Really not much we can do here ...\r\n\t\t\t\t\t\t\tif( (console != null) && (console.error != null) )\r\n\t\t\t\t\t\t\t\tconsole.error( 'Error while invoking long_polling_client_error event', err );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} );\r\n\t\t\t\treturn self;\r\n\t\t\t};\r\n\r\n\t\tself.triggerStatusChanged = function(status:ClientStatus)\r\n\t\t\t{\r\n\t\t\t\tself.events.trigger( 'long_polling_client_status_changed', status );\r\n\t\t\t}\r\n\t\tself.onStatusChanged = function(callback:(status:ClientStatus)=>void)\r\n\t\t\t{\r\n\t\t\t\tself.events.bind( 'long_polling_client_status_changed', function(evt,status:ClientStatus)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttry { callback(status); }\r\n\t\t\t\t\t\tcatch(err) { self.triggerInternalError( 'Error while invoking long_polling_client_status_changed event: '+err ); }\r\n\t\t\t\t\t} );\r\n\t\t\t\treturn self;\r\n\t\t\t};\r\n\r\n\t\tself.triggerMessageHandlerFailed = function(error:any)\r\n\t\t\t{\r\n\t\t\t\tself.events.trigger( 'message_handler_failed', error );\r\n\t\t\t}\r\n\t\tself.onMessageHandlerFailed = function(callback:(message:string)=>void)\r\n\t\t\t{\r\n\t\t\t\tself.events.bind( 'message_handler_failed', function(evt,error:any)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttry { callback(error); }\r\n\t\t\t\t\t\tcatch(err) { self.triggerInternalError( 'Error while invoking message_handler_failed event: '+err ); }\r\n\t\t\t\t\t} );\r\n\t\t\t\treturn self;\r\n\t\t\t};\r\n\r\n\t\tself.triggerConnectionIdReceived = function(connectionId:string)\r\n\t\t\t{\r\n\t\t\t\tself.events.trigger( 'long_polling_client_connection_id', connectionId );\r\n\t\t\t};\r\n\t\tself.onConnectionIdReceived = function(callback:(connectionId:string)=>void)\r\n\t\t\t{\r\n\t\t\t\tif( self.connectionId != null )\r\n\t\t\t\t{\r\n\t\t\t\t\t// Already received\r\n\t\t\t\t\tcallback( self.connectionId );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\telse // Defer\r\n\t\t\t\t{\r\n\t\t\t\t\tself.events.bind( 'long_polling_client_connection_id', function(evt,connectionId:string)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttry { callback(connectionId); }\r\n\t\t\t\t\t\t\tcatch(err) { self.triggerInternalError( 'Error while invoking long_polling_client_connection_id event: '+err ); }\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t\treturn self;\r\n\t\t\t};\r\n\r\n\t\tself.getConnectionId\t\t\t= function(){ return self.connectionId; };\r\n\t\tself.getStatus\t\t\t\t\t= function(){ return self.status; };\r\n\r\n\t\t// Init WebSocket communications\r\n\r\n\t\tvar onSocketError = function(e:any)\r\n\t\t\t{\r\n\t\t\t\tif( self.debug )\r\n\t\t\t\t\tconsole.log( 'WebSocket error', e );\r\n\r\n\t\t\t\tself.triggerInternalError( 'WebSocket error: '+e.message );\r\n\t\t\t};\r\n\r\n\t\tvar onSocketClose = function()\r\n\t\t\t{\r\n\t\t\t\tif( self.debug )\r\n\t\t\t\t\tconsole.log( 'WebSocket closed' );\r\n\r\n\t\t\t\tself.connectionId = null;\r\n\t\t\t\tself.webSocket = null;\r\n\r\n\t\t\t\tself.status = ClientStatus.DISCONNECTED;\r\n\t\t\t\tself.triggerStatusChanged( self.status );\r\n\t\t\t};\r\n\r\n\t\tvar onSocketMessageInit = function(e:any)\r\n\t\t\t{\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\tvar errorPrefix = 'JSON Parse Error: ';\r\n\t\t\t\t\tvar message = JSON.parse( e.data );\r\n\t\t\t\t\tvar errorPrefix = '';\r\n\r\n\t\t\t\t\tvar type = message['type'];\r\n\t\t\t\t\tif( type != 'init' )\r\n\t\t\t\t\t\tthrow 'Unexpected message type \"'+type+'\" ; Expected \"init\"';\r\n\r\n\t\t\t\t\tvar connectionId = message['sender'];\r\n\t\t\t\t\tif( connectionId == null )\r\n\t\t\t\t\t\tthrow 'Server did not responded with ConnectionID';\r\n\t\t\t\t\tself.connectionId = connectionId;\r\n\r\n\t\t\t\t\tif( self.debug )\r\n\t\t\t\t\t\tconsole.log( 'message recv', message );\r\n\r\n\t\t\t\t\t// Ready to receive & subsequent messages must go to the 'onMessage' handler\r\n\t\t\t\t\tself.status = ClientStatus.CONNECTED;\r\n\t\t\t\t\tself.webSocket.onmessage = onSocketMessage;\r\n\r\n\t\t\t\t\t// Start keepalive timer\r\n\t\t\t\t\tvar errorPrefix = 'Could not start keepalive timer: ';\r\n\t\t\t\t\tself.checkKeepAliveTimeout();\r\n\t\t\t\t}\r\n\t\t\t\tcatch( err )\r\n\t\t\t\t{\r\n\t\t\t\t\ttry { self.triggerInternalError( errorPrefix+err ); } catch(err) {}\r\n\t\t\t\t\treturn;  // Fatal ; Stop here ...\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Invoke events\r\n\t\t\t\tself.triggerStatusChanged( self.status );\r\n\t\t\t\tself.triggerConnectionIdReceived( self.connectionId );\r\n\r\n\t\t\t\t// Check for any pending messages\r\n\t\t\t\tself.sendPendingMessages();\r\n\t\t\t};\r\n\r\n\t\tvar onSocketMessage = function(e:any)\r\n\t\t\t{\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\tvar errorPrefix = 'JSON Parse Error: ';\r\n\t\t\t\t\tvar response = JSON.parse( e.data );\r\n\t\t\t\t\terrorPrefix = '';\r\n\r\n\t\t\t\t\tvar responseType = response[ 'type' ];\r\n\t\t\t\t\tif( responseType == 'reset' )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// Ignore (should not happen?)\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if( responseType == 'logout' )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\twindow.location.href = self.logoutUrl;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if( responseType == 'messages' )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar messagesList = response[ 'messages' ];\r\n\t\t\t\t\t\tfor( var i=0; i<messagesList.length; ++i )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttry\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar messageContent = messagesList[ i ];\r\n\t\t\t\t\t\t\t\tvar type = messageContent[ 'type' ];\r\n\r\n\t\t\t\t\t\t\t\tif( self.debug )\r\n\t\t\t\t\t\t\t\t\tconsole.log( 'message recv', messageContent );\r\n\r\n\t\t\t\t\t\t\t\tself.trigger( type, messageContent );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcatch( err )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t// The assigned message handler threw an exception\r\n\t\t\t\t\t\t\t\tself.triggerMessageHandlerFailed( err );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthrow 'Unknown response type \"' + responseType + '\"';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatch( err )\r\n\t\t\t\t{\r\n\t\t\t\t\tself.triggerInternalError( errorPrefix+err );\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\tself.start = function()\r\n\t\t\t{\r\n\t\t\t\tif( self.debug )\r\n\t\t\t\t\tconsole.log( 'WebSocket connecting \"'+self.handlerUrl+'\"' );\r\n\t\t\t\tself.webSocket = new WebSocket( self.handlerUrl );\r\n\t\t\t\tself.webSocket.onerror = onSocketError;\r\n\t\t\t\tself.webSocket.onclose = onSocketClose;\r\n\t\t\t\tself.webSocket.onmessage = onSocketMessageInit;\r\n\t\t\t\tself.webSocket.onopen = function()\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar message = { 'type' : 'init' };\r\n\t\t\t\t\t\tif( self.debug )\r\n\t\t\t\t\t\t\tconsole.log( 'message send', message );\r\n\t\t\t\t\t\t// Send init message\r\n\t\t\t\t\t\tself.webSocket.send( JSON.stringify(message) );\r\n\t\t\t\t\t};\r\n\t\t\t};\r\n\r\n\t\tself.checkKeepAliveTimeout = function()\r\n\t\t\t{\r\n\t\t\t\tif( self.keepAliveUrl == null )\r\n\t\t\t\t\t// Nothing to do\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif( self.getStatus() == ClientStatus.CONNECTED )\r\n\t\t\t\t{\r\n\t\t\t\t\tif( self.keepAliveTimer != null )\r\n\t\t\t\t\t\t// A timer is already running => NOOP\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t// Start the timer\r\n\t\t\t\t\tself.keepAliveTimer = setTimeout( function()\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// Deactivate current timer\r\n\t\t\t\t\t\t\tself.keepAliveTimer = null;\r\n\r\n\t\t\t\t\t\t\t// Send keepalive request\r\n\t\t\t\t\t\t\tvar req = new XMLHttpRequest();\r\n\t\t\t\t\t\t\treq.open( 'GET', self.keepAliveUrl );\r\n\t\t\t\t\t\t\treq.send();\r\n\r\n\t\t\t\t\t\t\t// Reactivate timer\r\n\t\t\t\t\t\t\tself.checkKeepAliveTimeout();\r\n\t\t\t\t\t\t}, self.keepAliveTimeout );\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tif( self.keepAliveTimer != null )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// A timer is running => Stop it\r\n\t\t\t\t\t\tvar tm = self.keepAliveTimer;\r\n\t\t\t\t\t\tself.keepAliveTimer = null;\r\n\t\t\t\t\t\tclearTimeout( tm );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\tself.sendMessage = function(message:Message, callback?:(evt?:any,message?:Message)=>void)\r\n\t\t\t{\r\n\t\t\t\tself.pendingMessages.push({ message:message, callback:callback });\r\n\t\t\t\tself.sendPendingMessages();\r\n\t\t\t\treturn self;\r\n\t\t\t};\r\n\r\n\t\tself.sendPendingMessages = function() : void\r\n\t\t\t{\r\n\t\t\t\tif( self.getStatus() != ClientStatus.CONNECTED )\r\n\t\t\t\t\t// Connection not ready\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar items = self.pendingMessages;\r\n\t\t\t\tself.pendingMessages = [];\r\n\r\n\t\t\t\tfor( var i=0; i<items.length; ++i )\r\n\t\t\t\t{\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar message\t\t= items[i].message;\r\n\t\t\t\t\t\tvar callback\t= items[i].callback;\r\n\r\n\t\t\t\t\t\tif( callback != null )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// Attach the callback to a new one-shot message handler\r\n\t\t\t\t\t\t\tvar replyMessageHandler = 'message_handler_autoreply_' + (++ self.sendMessageUid);\r\n\t\t\t\t\t\t\tmessage[ 'reply_to_type' ] = replyMessageHandler;\r\n\r\n\t\t\t\t\t\t\tself.bind( replyMessageHandler, function(evt, message)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t// The message has returned => unbind the one-shot message handler\r\n\t\t\t\t\t\t\t\t\tself.unbind( replyMessageHandler );\r\n\r\n\t\t\t\t\t\t\t\t\t// Forward the message to the callback\r\n\t\t\t\t\t\t\t\t\tcallback( evt, message );\r\n\t\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar rootMessage = {\t'type'\t\t: 'messages',\r\n\t\t\t\t\t\t\t\t\t\t\t'messages'\t: [ message ] };\r\n\r\n\t\t\t\t\t\tif( self.debug )\r\n\t\t\t\t\t\t\tconsole.log( 'message send', message );\r\n\r\n\t\t\t\t\t\tvar strMessage = JSON.stringify( rootMessage );\r\n\t\t\t\t\t\tself.webSocket.send( strMessage );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch( err )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttry { self.triggerInternalError( 'Unable to send message: '+err ); } catch(err) {}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t/////////////////////\r\n\r\n\t\t// Check URL's protocol\r\n\t\tvar url = document.createElement( 'a' );\r\n\t\turl.href = self.handlerUrl;\r\n\t\tif( (url.protocol != 'wss:') && (url.protocol != 'ws:') )\r\n\t\t{\r\n\t\t\tif( url.protocol == 'https:' )\r\n\t\t\t\turl.protocol = 'wss:';\r\n\t\t\telse\r\n\t\t\t\turl.protocol = 'ws:';\r\n\t\t}\r\n\t\tself.handlerUrl = url.href;\r\n\t}\r\n}  // class WebSocketClient\r\n\r\nexport default WebSocketClient;\r\n","\r\nimport { Client, MessageHandler, ClientStatus } from \"../../CommonLibs/Web/LongPolling/JSClient/Client\";\r\n\r\ndeclare global\r\n{\r\n\tinterface Window\r\n\t{\r\n\t\thome_index_init : (messageHandlerParameters:any)=>void;\r\n\t\tmessageHandler : MessageHandler;\r\n\t}\r\n}\r\n\r\nwindow.home_index_init = function init(messageHandlerParameters:any)\r\n{\r\n\tvar messageHandler = Client( messageHandlerParameters )\r\n\t\t\t\t\t\t\t.onStatusChanged( (status)=>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlet str;\r\n\t\t\t\t\t\t\t\t\tswitch( status )\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tcase ClientStatus.CONNECTED:\tstr = 'Connected';\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\tcase ClientStatus.DISCONNECTED:\tstr = 'Disconnected';\tbreak;\r\n\t\t\t\t\t\t\t\t\t\tcase ClientStatus.CONNECTED:\tstr = 'Connected';\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\tcase ClientStatus.PENDING:\t\tstr = 'Pending';\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\tcase ClientStatus.RUNNING:\t\tstr = 'Running';\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t$('#client-status').text( str );\r\n\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t.onInternalError( (msg)=>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t// Something that should not happen ...\r\n\t\t\t\t\t\t\t\t\tconsole.error( 'An internal error occured:', msg );\r\n\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t.onMessageHandlerFailed( (msg)=>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t// Something that should not happen either (e.g. a JSON response could not be parsed) ...\r\n\t\t\t\t\t\t\t\t\tconsole.error( 'A message handler failed:', msg );\r\n\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t.onConnectionIdReceived( (connectionID)=>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t// The connection to the server is now established\r\n\t\t\t\t\t\t\t\t} );\r\n\tmessageHandler.bind( 'exception', (evt,msg)=>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// The server sent a generic exception message (e.g. a message sent to an inexistent message handler)\r\n\t\t\t\t\t\tconsole.error( 'The server sent an exception:', msg );\r\n\t\t\t\t\t} );\r\n\tmessageHandler.start();\r\n\r\n\t// Method 1: Send a 'TestTimeGet' message every seconds ...\r\n\tsetInterval( function()\r\n\t\t{\r\n\t\t\tconst request = {\ttype : 'TestTimeGet',\r\n\t\t\t\t\t\t\t\tincludeEpoch : true };\r\n\t\t\tmessageHandler.sendMessage( request, (evt,response)=>\r\n\t\t\t\t{\r\n\t\t\t\t\tconst serverTime = `${response['time']} (Unix epoch: ${response['epoch']})`;\r\n\t\t\t\t\t$('#server-time-get').text( serverTime );\r\n\t\t\t\t} );\r\n\t\t}, 1000 );\r\n\r\n\t// Method 2: Ask the server to push the time\r\n\t{\r\n\t\t// Register a handler for the response messages\r\n\t\tmessageHandler.bind( 'receive-time-from-server', (evt,response)=>\r\n\t\t\t{\r\n\t\t\t\tconst serverTime = `${response['time']} (Unix epoch: ${response['epoch']}) ; To go: ${response['repeatsToGo']}`;\r\n\t\t\t\t$('#server-time-push').text( serverTime );\r\n\t\t\t} );\r\n\r\n\t\t$('#btn-test-push').click( ()=>\r\n\t\t\t{\r\n\t\t\t\t// Send a 'TestTimePush' message ...\r\n\t\t\t\tconst request = {\ttype : 'TestTimePush',\r\n\t\t\t\t\t\t\t\t\treply_to_type : 'receive-time-from-server',  // ... and receive its response to the 'receive-time-from-server' handler registered above\r\n\t\t\t\t\t\t\t\t\trepeat : 10,  // Push 10 responses\r\n\t\t\t\t\t\t\t\t\tincludeEpoch : true };\r\n\t\t\t\tmessageHandler.sendMessage( request );\r\n\t\t\t} );\r\n\t}\r\n\r\n\t// Example server exception\r\n\t$('#btn-test-crash').click( ()=>\r\n\t\t{\r\n\t\t\t// Send a 'TestCrash' message\r\n\t\t\tmessageHandler.sendMessage( { type : 'TestCrash' }, (evt,response)=>\r\n\t\t\t\t{\r\n\t\t\t\t\t// Use the 2nd parameter to define the response handler instead of using 'messageHandler.bind()' as above\r\n\t\t\t\t\tconst json = JSON.stringify( response, null, 4 );\r\n\t\t\t\t\tshowTextDialogMessage( json, 'The server responded:' );\r\n\t\t\t\t} );\r\n\t\t} );\r\n\r\n\twindow.messageHandler = messageHandler;  // NB: Only so it can be used from the JavaScript's console\r\n}\r\n\r\nfunction showTextDialogMessage(msg, title)\r\n{\r\n\tvar $root = $('<div/>').attr( 'title', title );\r\n\tif( msg instanceof jQuery )\r\n\t\t$root.append( msg );\r\n\telse\r\n\t\t$root.append( $('<pre/>').text(msg) );\r\n\t$(document.body).append( $root );\r\n\t$root.dialog();\r\n}\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJDb21tb25MaWJzL1dlYi9Mb25nUG9sbGluZy9KU0NsaWVudC9DbGllbnQudHMiLCJDb21tb25MaWJzL1dlYi9Mb25nUG9sbGluZy9KU0NsaWVudC9IdHRwQ2xpZW50LnRzIiwiQ29tbW9uTGlicy9XZWIvTG9uZ1BvbGxpbmcvSlNDbGllbnQvV2ViU29ja2V0Q2xpZW50LnRzIiwiVmlld3MvSG9tZS9JbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUMsd0NBQTBDO0FBQzNDLG1DQUFxQztBQUUxQixRQUFBLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO0FBQzdCLFFBQUEsZUFBZSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUM7QUFvQ2xELElBQVksWUFNWDtBQU5ELFdBQVksWUFBWTtJQUV2QiwrREFBWSxDQUFBO0lBQ1oseURBQVMsQ0FBQTtJQUNULHFEQUFPLENBQUE7SUFDUCxxREFBTyxDQUFBO0FBQ1IsQ0FBQyxFQU5XLFlBQVksR0FBWixvQkFBWSxLQUFaLG9CQUFZLFFBTXZCO0FBQUEsQ0FBQztBQUVGO0lBRUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNkLENBQUM7QUFIRCxnREFHQztBQUVELGdCQUF1QixDQU9qQjtJQUVMLElBQUksWUFBWSxHQUFhLENBQUMsQ0FBQyxDQUFDLG1CQUFtQixJQUFJLElBQUksQ0FBQyxDQUFDO0lBQzdELFlBQVksR0FBRyxDQUFFLFlBQVksSUFBSSxDQUFDLE9BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxXQUFXLENBQUMsQ0FBRSxDQUFDO0lBQ3RFLElBQUksVUFBVSxHQUFhLENBQUMsQ0FBQyxDQUFDLGNBQWMsSUFBSSxJQUFJLENBQUMsQ0FBQztJQUV0RCxFQUFFLENBQUEsQ0FBRSxDQUFDLENBQUMsS0FBTSxDQUFDLENBQ2IsQ0FBQztRQUNBLGtDQUFrQztRQUNsQyxFQUFFLENB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QUcsRUFBRSxLQUFLO0lBRXhDLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUUsT0FBTyxFQUFFLEtBQUssQ0FBRSxDQUFDO0lBQy9DLEVBQUUsQ0FBQSxDQUFFLEdBQUcsWUFBWSxNQUFPLENBQUM7UUFDMUIsS0FBSyxDQUFDLE1BQU0sQ0FBRSxHQUFHLENBQUUsQ0FBQztJQUNyQixJQUFJO1FBQ0gsS0FBSyxDQUFDLE1BQU0sQ0FBRSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFFLENBQUM7SUFDdkMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUUsS0FBSyxDQUFFLENBQUM7SUFDakMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ2hCLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwi77u/aW1wb3J0ICogYXMgc29jayBmcm9tICcuL1dlYlNvY2tldENsaWVudCc7XHJcbmltcG9ydCAqIGFzIGh0dHAgZnJvbSAnLi9IdHRwQ2xpZW50JztcclxuXHJcbmV4cG9ydCB2YXIgSHR0cENsaWVudCA9IGh0dHAuSHR0cENsaWVudDtcclxuZXhwb3J0IHZhciBXZWJTb2NrZXRDbGllbnQgPSBzb2NrLldlYlNvY2tldENsaWVudDtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZVxyXG57XHJcblx0dHlwZVx0XHRcdFx0OiBzdHJpbmc7XHJcblx0cmVwbHlfdG9fdHlwZT9cdFx0OiBzdHJpbmc7XHJcblx0c2VuZGVyP1x0XHRcdFx0OiBzdHJpbmc7XHJcblx0Y2hhaW5lZF9tZXNzYWdlcz9cdDogTWVzc2FnZVtdO1xyXG59XHJcbi8vIFVzZSB0aGlzIHdoZW4gbWVtYmVycyBhcmUgbm90IHRvIGJlIHN0cmljdGx5IGVuZm9yY2VkIChiZWhhdmVzIGFzIGEgcmVndWxhciBkaWN0aW9uYXJ5KTpcclxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlRGljdCBleHRlbmRzIE1lc3NhZ2Vcclxue1xyXG5cdFtrZXk6c3RyaW5nXTphbnk7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnRzSGFuZGxlclxyXG57XHJcblx0YmluZFx0OiAobmFtZTpzdHJpbmcsIGNhbGxiYWNrOihldnQ/OmFueSxwPzphbnkpPT52b2lkKT0+RXZlbnRzSGFuZGxlcjtcclxuXHR1bmJpbmRcdDogKG5hbWU6c3RyaW5nLCBjYWxsYmFjaz86KGV2dD86YW55LHA/OmFueSk9PnZvaWQpPT5FdmVudHNIYW5kbGVyO1xyXG5cdHRyaWdnZXJcdDogKG5hbWU6c3RyaW5nLCBwPzphbnkpPT5FdmVudHNIYW5kbGVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VIYW5kbGVyXHJcbntcclxuXHRzdGFydFx0XHRcdFx0XHQ6ICgpPT52b2lkO1xyXG5cdGdldFN0YXR1c1x0XHRcdFx0OiAoKT0+Q2xpZW50U3RhdHVzO1xyXG5cdGdldFN5bmNlZEhhbmRsZXJVcmxcdFx0OiAoKT0+c3RyaW5nO1xyXG5cdG9uQ29ubmVjdGlvbklkUmVjZWl2ZWRcdDogKGNhbGxiYWNrOihjb25uZWN0aW9uSWQ6c3RyaW5nKT0+dm9pZCk9Pk1lc3NhZ2VIYW5kbGVyO1xyXG5cdG9uU3RhdHVzQ2hhbmdlZFx0XHRcdDogKGNhbGxiYWNrOihzdGF0dXM6Q2xpZW50U3RhdHVzKT0+dm9pZCk9Pk1lc3NhZ2VIYW5kbGVyO1xyXG5cdG9uSW50ZXJuYWxFcnJvclx0XHRcdDogKGNhbGxiYWNrOihtZXNzYWdlOnN0cmluZyk9PnZvaWQpPT5NZXNzYWdlSGFuZGxlcjtcclxuXHRvbk1lc3NhZ2VIYW5kbGVyRmFpbGVkXHQ6IChjYWxsYmFjazooZXJyb3I6YW55KT0+dm9pZCk9Pk1lc3NhZ2VIYW5kbGVyO1xyXG5cdGJpbmRcdFx0XHRcdFx0OiAobmFtZTpzdHJpbmcsIGNhbGxiYWNrOihldnQ/OmFueSxtZXNzYWdlPzpNZXNzYWdlKT0+dm9pZCk9PkV2ZW50c0hhbmRsZXI7XHJcblx0dW5iaW5kXHRcdFx0XHRcdDogKG5hbWU6c3RyaW5nLCBjYWxsYmFjaz86KGV2dD86YW55KT0+dm9pZCk9PkV2ZW50c0hhbmRsZXI7XHJcblx0c2VuZE1lc3NhZ2VcdFx0XHRcdDogKG1lc3NhZ2U6TWVzc2FnZSwgY2FsbGJhY2s/OihldnQ/OmFueSxtZXNzYWdlPzpNZXNzYWdlKT0+dm9pZCk9Pk1lc3NhZ2VIYW5kbGVyO1xyXG59XHJcblxyXG5leHBvcnQgZW51bSBDbGllbnRTdGF0dXNcclxue1xyXG5cdERJU0NPTk5FQ1RFRCxcdC8vIFdoZW4gdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHNlcnZlciBpcyBub3QgeWV0IGVzdGFibGlzaGVkIG9yIGlzIGxvc3RcclxuXHRDT05ORUNURUQsXHRcdC8vIFdoZW4gdGhlcmUgaXMgYSBwb2xsaW5nIHJlcXVlc3QgY3VycmVudGx5IGNvbm5lY3RlZCB0byB0aGUgc2VydmVyLlxyXG5cdFBFTkRJTkcsXHRcdC8vIChOQjogT25seSB1c2VkIGJ5IEh0dHBDbGllbnQpIFdoZW4gdGhlIG1lc3NhZ2UgcmVxdWVzdCBpcyBjdXJyZW50bHkgc2VuZGluZyBtZXNzYWdlcyB0byB0aGUgc2VydmVyIGFuZCB0aGVyZSBhcmUgbWVzc2FnZXMgcGVuZGluZyBpbiB0aGUgcXVldWVcclxuXHRSVU5OSU5HLFx0XHQvLyAoTkI6IE9ubHkgdXNlZCBieSBIdHRwQ2xpZW50KSBXaGVuIHRoZSBtZXNzYWdlIHJlcXVlc3QgaXMgY3VycmVudGx5IHNlbmRpbmcgbWVzc2FnZXMgdG8gdGhlIHNlcnZlci5cclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFdmVudEhhbmRsZXIoKSA6IEV2ZW50c0hhbmRsZXJcclxue1xyXG5cdHJldHVybiAkKHt9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIENsaWVudChwOntcdGRlYnVnP1x0XHRcdFx0XHRcdDogYm9vbGVhbixcclxuXHRcdFx0XHRcdFx0XHRodHRwSGFuZGxlclVybD9cdFx0XHRcdDogc3RyaW5nLFxyXG5cdFx0XHRcdFx0XHRcdHdlYlNvY2tldEhhbmRsZXJVcmw/XHRcdDogc3RyaW5nLFxyXG5cdFx0XHRcdFx0XHRcdHdlYlNvY2tldEtlZXBBbGl2ZVVybD9cdFx0OiBzdHJpbmcsXHJcblx0XHRcdFx0XHRcdFx0d2ViU29ja2V0S2VlcEFsaXZlVGltZW91dD9cdDogbnVtYmVyLFxyXG5cdFx0XHRcdFx0XHRcdHN5bmNlZEhhbmRsZXJVcmw/XHRcdFx0OiBzdHJpbmcsXHJcblx0XHRcdFx0XHRcdFx0bG9nb3V0VXJsXHRcdFx0XHRcdDogc3RyaW5nXHJcblx0XHRcdFx0XHR9KSA6IE1lc3NhZ2VIYW5kbGVyXHJcbntcclxuXHR2YXIgY2FuVXNlU29ja2V0IDogYm9vbGVhbiA9IChwLndlYlNvY2tldEhhbmRsZXJVcmwgIT0gbnVsbCk7XHJcblx0Y2FuVXNlU29ja2V0ID0gKCBjYW5Vc2VTb2NrZXQgJiYgKHR5cGVvZihXZWJTb2NrZXQpICE9ICd1bmRlZmluZWQnKSApO1xyXG5cdHZhciBjYW5Vc2VIdHRwIDogYm9vbGVhbiA9IChwLmh0dHBIYW5kbGVyVXJsICE9IG51bGwpO1xyXG5cclxuXHRpZiggcC5kZWJ1ZyApXHJcblx0e1xyXG5cdFx0Ly8gQ2hlY2sgdGhhdCBjb25zb2xlIGlzIGF2YWlsYWJsZVxyXG5cdFx0aWYoICh0eXBlb2YoY29uc29sZSkgPT0gJ3VuZGVmaW5lZCcpIHx8ICh0eXBlb2YoY29uc29sZS5sb2cpID09ICd1bmRlZmluZWQnKSApXHJcblx0XHRcdC8vIERlYnVnZ2luZyBub3QgYXZhaWxhYmxlXHJcblx0XHRcdHAuZGVidWcgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdGlmKCBjYW5Vc2VTb2NrZXQgKVxyXG5cdHtcclxuXHRcdHJldHVybiBuZXcgc29jay5XZWJTb2NrZXRDbGllbnQoeyBkZWJ1ZzpwLmRlYnVnLCBoYW5kbGVyVXJsOnAud2ViU29ja2V0SGFuZGxlclVybCwga2VlcEFsaXZlVXJsOnAud2ViU29ja2V0S2VlcEFsaXZlVXJsLCBrZWVwQWxpdmVUaW1lb3V0OnAud2ViU29ja2V0S2VlcEFsaXZlVGltZW91dCwgc3luY2VkSGFuZGxlclVybDpwLnN5bmNlZEhhbmRsZXJVcmwsIGxvZ291dFVybDpwLmxvZ291dFVybCB9KTtcclxuXHR9XHJcblx0ZWxzZSBpZiggY2FuVXNlSHR0cCApXHJcblx0e1xyXG5cdFx0dmFyIGNsaWVudCA9IGh0dHAuSHR0cENsaWVudCggcC5odHRwSGFuZGxlclVybCwgcC5zeW5jZWRIYW5kbGVyVXJsLCBwLmxvZ291dFVybCApO1xyXG5cclxuXHRcdC8vIFRPRE86IEFsYWluOiBDbGVhbnVwICdIdHRwQ2xpZW50JyAmIGluY2x1ZGUgJ3NlbmRNZXNzYWdlKG1lc3NhZ2UsIGNhbGxiYWNrKSdcclxuXHJcblx0XHQvLyBPdmVycmlkZSAnY2xpZW50LnNlbmRNZXNzYWdlKCknIHRvIHN1cHBvcnQgYSBzZWNvbmQgYXJndW1lbnQ6ICdjYWxsYmFjaydcclxuXHRcdHZhciBzZW5kTWVzc2FnZVVpZCA9IDA7XHJcblx0XHR2YXIgYmFzZVNlbmRNZXNzYWdlID0gY2xpZW50LnNlbmRNZXNzYWdlO1xyXG5cdFx0Y2xpZW50LnNlbmRNZXNzYWdlID0gZnVuY3Rpb24obWVzc2FnZTpNZXNzYWdlLCBjYWxsYmFjazphbnkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiggY2FsbGJhY2sgIT0gbnVsbCApXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Ly8gQXR0YWNoIHRoZSBjYWxsYmFjayB0byBhIG5ldyBvbmUtc2hvdCBtZXNzYWdlIGhhbmRsZXJcclxuXHRcdFx0XHRcdHZhciByZXBseU1lc3NhZ2VIYW5kbGVyID0gJ2NvbW1vbmxpYnNfbWVzc2FnZV9oYW5kbGVyX2F1dG9yZXBseV8nICsgKCsrIHNlbmRNZXNzYWdlVWlkKTtcclxuXHRcdFx0XHRcdG1lc3NhZ2VbICdyZXBseV90b190eXBlJyBdID0gcmVwbHlNZXNzYWdlSGFuZGxlcjtcclxuXHJcblx0XHRcdFx0XHRjbGllbnQuYmluZCggcmVwbHlNZXNzYWdlSGFuZGxlciwgZnVuY3Rpb24oZXZ0OmFueSwgbWVzc2FnZTpNZXNzYWdlKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0Ly8gVGhlIG1lc3NhZ2UgaGFzIHJldHVybmVkID0+IHVuYmluZCB0aGUgb25lLXNob3QgbWVzc2FnZSBoYW5kbGVyXHJcblx0XHRcdFx0XHRcdFx0Y2xpZW50LnVuYmluZCggcmVwbHlNZXNzYWdlSGFuZGxlciApO1xyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBGb3J3YXJkIHRoZSBtZXNzYWdlIHRvIHRoZSBjYWxsYmFja1xyXG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrKCBldnQsIG1lc3NhZ2UgKTtcclxuXHRcdFx0XHRcdFx0fSApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gSW52b2tlIG9yaWdpbmFsICdzZW5kTWVzc2FnZSgpJyBmdW5jdGlvblxyXG5cdFx0XHRcdGJhc2VTZW5kTWVzc2FnZSggbWVzc2FnZSApO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdHJldHVybiBjbGllbnQ7XHJcblx0fVxyXG5cdGVsc2VcclxuXHR7XHJcblx0XHRzb2NrLmVycm9yKCAnVW5hYmxlIHRvIGZpbmQgYSBzdWl0YWJsZSBtZXNzYWdlIGhhbmRsZXIgcHJvdG9jb2wnICk7ICAvLyBOQjogVGVtcG9yYXJpbHkgdXNlIHRoZSBzYW1lIGVycm9yIGhhbmRsZXIgKHVudGlsIHRoZSB3aG9sZSAndXRpbHMuKi50cycgYXJlIG1lcmdlZClcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2xpZW50O1xyXG4iLCLvu78vL1xyXG4vLyBDb21tb25MaWJzL1dlYi9Mb25nUG9sbGluZy9KU0NsaWVudC9IdHRwQ2xpZW50LnRzXHJcbi8vXHJcbi8vIEF1dGhvcjpcclxuLy8gICBBbGFpbiBDQU8gKGFsYWluY2FvMTdAZ21haWwuY29tKVxyXG4vL1xyXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTAgLSAyMDE4IEFsYWluIENBT1xyXG4vL1xyXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmdcclxuLy8gYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXHJcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xyXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXHJcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xyXG4vLyBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG9cclxuLy8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxyXG4vL1xyXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxyXG4vLyBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuLy9cclxuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcclxuLy8gRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXHJcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXHJcbi8vIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkVcclxuLy8gTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTlxyXG4vLyBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT05cclxuLy8gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXHJcbi8vXHJcblxyXG4vLyBUT0RPOiBBQ0E6IEh0dHBDbGllbnQ6IFJld3JpdGUgaW4gY2xlYW4gVHlwZVNjcmlwdCAhISFcclxuXHJcbmltcG9ydCB7IE1lc3NhZ2UsIENsaWVudFN0YXR1cyB9IGZyb20gJy4vQ2xpZW50JztcclxuXHJcbmRlY2xhcmUgdmFyICQ6IGFueTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBIdHRwQ2xpZW50KGhhbmRsZXJVcmw6c3RyaW5nLCBzeW5jZWRIYW5kbGVyVXJsOnN0cmluZywgbG9nb3V0VXJsOnN0cmluZylcclxue1xyXG5cdHZhciAkdGhpcyA9ICQodGhpcyk7XHJcblx0dGhpcy4kdGhpcyA9ICR0aGlzO1xyXG5cdHZhciB0aGlzRE9NID0gdGhpcztcclxuXHJcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblx0Ly8gUmVzZXJ2ZWQgZXZlbnQgbmFtZXM6IC8vXHJcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5cdC8vIEJpbmQgdG8gdGhpcyBldmVudCB0byBiZSB3YXJuZWQgb2YgY2hhbmdlcyBpbiB0aGUgY29ubmVjdGlvbiBzdGF0dXNcclxuXHQvLyBFdmVudCBwYXJhbWV0ZXI6XHQnQ09OTkVDVEVEJyB3aGVuIHRoZXJlIGlzIGEgcG9sbGluZyByZXF1ZXN0IGN1cnJlbnRseSBjb25uZWN0ZWQgdG8gdGhlIHNlcnZlci5cclxuXHQvL1x0XHRcdFx0XHQnRElTQ09OTkVDVEVEJyB3aGVuIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBzZXJ2ZXIgaXMgbG9zdCAoTkI6IFRyeSBydW4gdGhlICd2ZXJpZnlDb25uZWN0aW9ucygpJyBtZXRob2QgdG8gdHJ5IHRvIHJlY29ubmVjdCB0byB0aGUgc2VydmVyKS5cclxuXHQvL1x0XHRcdFx0XHQnUlVOTklORycgd2hlbiB0aGUgbWVzc2FnZSByZXF1ZXN0IGlzIGN1cnJlbnRseSBzZW5kaW5nIG1lc3NhZ2VzIHRvIHRoZSBzZXJ2ZXIuXHJcblx0Ly9cdFx0XHRcdFx0J1BFTkRJTkcnIHdoZW4gdGhlIG1lc3NhZ2UgcmVxdWVzdCBpcyBjdXJyZW50bHkgc2VuZGluZyBtZXNzYWdlcyB0byB0aGUgc2VydmVyIGFuZCB0aGVyZSBhcmUgbWVzc2FnZXMgcGVuZGluZyBpbiB0aGUgcXVldWVcclxuXHQkdGhpcy5zdGF0dXNDaGFuZ2VkRXZlbnQgPSBcImxvbmdfcG9sbGluZ19jbGllbnRfc3RhdHVzX2NoYW5nZWRcIjtcclxuXHJcblx0Ly8gQmluZCB0byB0aGlzIGV2ZW50IHRvIHJlY2VpdmUgZXJyb3JzIHdoZW4gYW4gYXNzaWduZWQgbWVzc2FnZSBoYW5kbGVyIHRocmV3IGFuIGV4Y2VwdGlvbi5cclxuXHQvLyBFdmVudCBwYXJhbWV0ZXI6IFRoZSBlcnJvciBvYmplY3QgdGhyZXcgYnkgdGhlIGFzc2lnbmVkIG1lc3NhZ2UgaGFuZGxlciBhcyByZWNlaXZkIGJ5IHRoZSBjYXRjaCgpLlxyXG5cdCR0aGlzLm1lc3NhZ2VIYW5kbGVyRmFpbGVkRXZlbnQgPSAnbWVzc2FnZV9oYW5kbGVyX2ZhaWxlZCc7XHJcblxyXG5cdC8vIEJpbmQgdG8gdGhpcyBldmVudCB0byBnZXQgZXJyb3IgbWVzc2FnZXMgd2hlbiBhbiBpbnRlcm5hbCBlcnJvciBvY2N1cmVzIGluc2lkZSB0aGUgTG9uZ1BvbGxpbmdDbGllbnQgb2JqZWN0XHJcblx0Ly8gRXZlbnQgcGFyYW1ldGVyOiBBIGRlc2NyaXB0aW9uIHN0cmluZyBvZiB0aGUgZXJyb3JcclxuXHQkdGhpcy5pbnRlcm5hbEVycm9yRXZlbnQgPSAnbG9uZ19wb2xsaW5nX2NsaWVudF9lcnJvcic7XHJcblxyXG5cdC8vIEJpbmQgdG8gdGhpcyBldmVudCB0byByZWNlaXZlIHRoZSBDb25uZWN0aW9uSUQgdGhhdCBoYXMgYmVlbiBhc3NpZ25lZCB0byB0aGlzIExvbmdQb2xsaW5nQ2xpZW50IGFzIHNvb24gYXMgaXQgaGFzIGJlZW4gcmVjZWl2ZWRcclxuXHQvLyBFdmVudCBwYXJhbWV0ZXI6IFRoZSBDb25uZWN0aW9uSUQgKHN0cmluZylcclxuXHQkdGhpcy5jb25uZWN0aW9uSURSZWNlaXZlZEV2ZW50ID0gJ2xvbmdfcG9sbGluZ19jbGllbnRfY29ubmVjdGlvbl9pZCc7XHJcblxyXG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblx0Ly8gTWVtYmVyIHZhcmlhYmxlczogLy9cclxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuXHR0aGlzLl9fc3RhdHVzXHRcdFx0XHRcdD0gQ2xpZW50U3RhdHVzLkRJU0NPTk5FQ1RFRDtcclxuXHJcblx0Ly8gVVJMIG9mIHRoZSBzZXJ2ZXItc2lkZSBtZXNzYWdlIGhhbmRsZXJcclxuXHR0aGlzLl9faGFuZGxlclVybFx0XHRcdFx0PSBoYW5kbGVyVXJsO1xyXG5cdC8vIFVSTCBvZiB0aGUgc2VydmVyLXNpZGUgc3luY2VkIGhhbmRsZXJcclxuXHR0aGlzLl9fc3luY2VkSGFuZGxlclVybFx0XHRcdD0gc3luY2VkSGFuZGxlclVybDtcclxuXHQvLyBVUkwgb2YgdGhlIGxvZ291dCBwYWdlXHJcblx0dGhpcy5fX2xvZ291dFVybFx0XHRcdFx0PSBsb2dvdXRVcmw7XHJcblxyXG5cdC8vIFRoZSBvbmx5IDIgSFRUUCByZXF1ZXN0cyB0aGF0IGNhbiBiZSBydW5uaW5nIGF0IHRoZSBzYW1lIHRpbWU6XHJcblx0dGhpcy5fX3BvbGxpbmdSZXF1ZXN0XHRcdFx0PSBudWxsO1xyXG5cdHRoaXMuX19tZXNzYWdlUmVxdWVzdFx0XHRcdD0gbnVsbDtcclxuXHJcblx0Ly8gVGhpcyBjbGllbnQncyBTZW5kZXJJRFxyXG5cdHRoaXMuX19jb25uZWN0aW9uSURcdFx0XHRcdD0gbnVsbDtcclxuXHJcblx0Ly8gVGhlIGxpc3Qgb2YgbWVzc2FnZXMgdGhhdCBhcmUgd2FpdGluZyBmb3IgdGhlIF9fbWVzc2FnZVJlcXVlc3QgdG8gYmUgYXZhaWxhYmxlXHJcblx0dGhpcy5fX3BlbmRpbmdNZXNzYWdlc1x0XHRcdD0gbnVsbDtcclxuXHJcblx0Ly8vLy8vLy8vLy8vLy9cclxuXHQvLyBNZXRob2RzOiAvL1xyXG5cdC8vLy8vLy8vLy8vLy8vXHJcblxyXG5cdHRoaXMuZ2V0U3luY2VkSGFuZGxlclVybCA9IGZ1bmN0aW9uKClcclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5fX3N5bmNlZEhhbmRsZXJVcmw7XHJcblx0fVxyXG5cclxuXHR0aGlzLmdldFN0YXR1cyA9IGZ1bmN0aW9uKClcclxuXHR7XHJcblx0XHR2YXIgbmV3U3RhdHVzO1xyXG5cdFx0aWYoIHRoaXMuX19wb2xsaW5nUmVxdWVzdCA9PSBudWxsIClcclxuXHRcdHtcclxuXHRcdFx0bmV3U3RhdHVzID0gQ2xpZW50U3RhdHVzLkRJU0NPTk5FQ1RFRDtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYoIHRoaXMuX19tZXNzYWdlUmVxdWVzdCAhPSBudWxsIClcclxuXHRcdHtcclxuXHRcdFx0aWYoIHRoaXMuX19wZW5kaW5nTWVzc2FnZXMgIT0gbnVsbCApXHJcblx0XHRcdFx0bmV3U3RhdHVzID0gQ2xpZW50U3RhdHVzLlBFTkRJTkc7XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHRuZXdTdGF0dXMgPSBDbGllbnRTdGF0dXMuUlVOTklORztcclxuXHRcdH1cclxuXHRcdGVsc2VcclxuXHRcdHtcclxuXHRcdFx0bmV3U3RhdHVzID0gQ2xpZW50U3RhdHVzLkNPTk5FQ1RFRDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiggdGhpcy5fX3N0YXR1cyAhPSBuZXdTdGF0dXMgKVxyXG5cdFx0e1xyXG5cdFx0XHR0aGlzLl9fc3RhdHVzID0gbmV3U3RhdHVzO1xyXG5cdFx0XHR0cnkgeyB0aGlzLiR0aGlzLnRyaWdnZXIoIHRoaXMuJHRoaXMuc3RhdHVzQ2hhbmdlZEV2ZW50LCBuZXdTdGF0dXMgKTsgfSBjYXRjaChlcnIpIHt9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbmV3U3RhdHVzO1xyXG5cdH1cclxuXHJcblx0dGhpcy5vbkNvbm5lY3Rpb25JZFJlY2VpdmVkID0gZnVuY3Rpb24oY2FsbGJhY2s6KGNpZDpzdHJpbmcpPT52b2lkKVxyXG5cdHtcclxuXHRcdGlmKCB0aGlzLl9fY29ubmVjdGlvbklEICE9IG51bGwgKVxyXG5cdFx0e1xyXG5cdFx0XHQvLyBUaGVyZSBpcyBhbHJlYWR5IGEgQ29ubmVjdGlvbklEID0+IEludm9rZSBjYWxsYmFjayByaWdodCBub3dcclxuXHRcdFx0dHJ5XHJcblx0XHRcdHtcclxuXHRcdFx0XHRjYWxsYmFjayggdGhpcy5fX2Nvbm5lY3Rpb25JRCApO1xyXG5cdFx0XHR9IGNhdGNoKCBlcnIgKSB7XHJcblx0XHRcdFx0Ly8gVGhlIGFzc2lnbmVkIG1lc3NhZ2UgaGFuZGxlciB0aHJldyBhbiBleGNlcHRpb25cclxuXHRcdFx0XHR0cnkgeyB0aGlzLiR0aGlzLnRyaWdnZXIoIHRoaXMubWVzc2FnZUhhbmRsZXJGYWlsZWRFdmVudCwgZXJyICk7IH0gY2F0Y2goZXJyKSB7fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlXHJcblx0XHR7XHJcblx0XHRcdC8vIFRoZSBDb25uZWN0aW9uSUQgaXMgbm90IHJlY2VpdmVkIHlldCA9PiBCaW5kIHRoZSBjYWxsYmFjayB0byB0aGUgJ2Nvbm5lY3Rpb25JRFJlY2VpdmVkRXZlbnQnIHRyaWdnZXJcclxuXHRcdFx0dGhpcy4kdGhpcy5iaW5kKCB0aGlzLiR0aGlzLmNvbm5lY3Rpb25JRFJlY2VpdmVkRXZlbnQsIChmdW5jdGlvbihjYilcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBmdW5jdGlvbihldnQ6YW55LGNvbm5lY3Rpb25JRDpzdHJpbmcpXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2IoIGNvbm5lY3Rpb25JRCApO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSkoY2FsbGJhY2spICk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHR0aGlzLnZlcmlmeUNvbm5lY3Rpb25zID0gZnVuY3Rpb24oKVxyXG5cdHtcclxuXHRcdHZhciBtZXNzYWdlIDogYW55O1xyXG5cclxuXHRcdGlmKCB0aGlzLl9fcG9sbGluZ1JlcXVlc3QgPT0gbnVsbCApXHJcblx0XHR7XHJcblx0XHRcdC8vIFRoZSBwb2xsaW5nIHJlcXVlc3QgbXVzdCBiZSAocmUpc3RhcnRlZCA9PiBTZW5kIGEgc2ltcGxlIHBvbGwgcmVxdWVzdFxyXG4vL2NvbnNvbGUubG9nKCAnUE9MTCcgKTtcclxuXHRcdFx0bWVzc2FnZSA9IHtcdCd0eXBlJzogJ3BvbGwnLFxyXG5cdFx0XHRcdFx0XHQnc2VuZGVyJzogdGhpcy5fX2Nvbm5lY3Rpb25JRCB9O1xyXG5cdFx0XHR0aGlzLl9fcG9sbGluZ1JlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHRcdFx0dGhpcy5fX3NlbmQoIHRoaXMuX19wb2xsaW5nUmVxdWVzdCwgbWVzc2FnZSApO1xyXG5cdFx0fVxyXG5cdFx0aWYoIHRoaXMuX19tZXNzYWdlUmVxdWVzdCA9PSBudWxsIClcclxuXHRcdHtcclxuXHRcdFx0Ly8gVGhlcmUgaXMgbm8gcmVxdWVzdCBjdXJyZW50bHkgcnVubmluZ1xyXG5cclxuXHRcdFx0aWYoIHRoaXMuX19wZW5kaW5nTWVzc2FnZXMgPT0gbnVsbCApXHJcblx0XHRcdFx0Ly8gTm8gcGVuZGluZyBtZXNzYWdlXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRpZiggdGhpcy5fX2Nvbm5lY3Rpb25JRCA9PSBudWxsIClcclxuXHRcdFx0XHQvLyBObyBDb25uZWN0aW9uSUQgYXZhaWxhYmxlIHlldCAod2FpdCBmb3IgaW5pdCgpIHRvIHRlcm1pbmF0ZS4uLilcclxuXHRcdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0XHQvLyBDcmVhdGUgbWVzc2FnZSBsaXN0IHdpdGggYWxsIHRoZSBwZW5kaW5nIG1lc3NhZ2VzXHJcblx0XHRcdHZhciBtZXNzYWdlQ29udGVudHMgPSBbXTtcclxuXHRcdFx0Zm9yKCB2YXIgaT0wOyBpPHRoaXMuX19wZW5kaW5nTWVzc2FnZXMubGVuZ3RoOyArK2kgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dmFyIG1lc3NhZ2VJdGVtID0gdGhpcy5fX3BlbmRpbmdNZXNzYWdlc1sgaSBdO1xyXG5cclxuXHRcdFx0XHQvLyBBZGQgbWVzc2FnZSBjb250ZW50IHRvIHNlbmRcclxuXHRcdFx0XHRtZXNzYWdlID0gbWVzc2FnZUl0ZW1bICdjb250ZW50JyBdO1xyXG5cdFx0XHRcdG1lc3NhZ2VDb250ZW50cy5wdXNoKCBtZXNzYWdlICk7XHJcbi8vY29uc29sZS5sb2coICdTTkQnLCBtZXNzYWdlICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFNlbmQgbWVzc2FnZVxyXG5cdFx0XHRtZXNzYWdlID0ge1x0J3R5cGUnOiAnbWVzc2FnZXMnLFxyXG5cdFx0XHRcdFx0XHQnc2VuZGVyJzogdGhpcy5fX2Nvbm5lY3Rpb25JRCxcclxuXHRcdFx0XHRcdFx0J21lc3NhZ2VzJzogbWVzc2FnZUNvbnRlbnRzIH07XHJcblx0XHRcdHRoaXMuX19tZXNzYWdlUmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cdFx0XHR0aGlzLl9fc2VuZCggdGhpcy5fX21lc3NhZ2VSZXF1ZXN0LCBtZXNzYWdlICk7XHJcblx0XHRcdHRoaXMuX19wZW5kaW5nTWVzc2FnZXMgPSBudWxsOyAgLy8gTm8gbW9yZSBwZW5kaW5nIG1lc3NhZ2VzXHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHR0aGlzLnNlbmRNZXNzYWdlcyA9IGZ1bmN0aW9uKG1lc3NhZ2VzOk1lc3NhZ2VbXSlcclxuXHR7XHJcblx0XHRpZiggdGhpcy5fX3BlbmRpbmdNZXNzYWdlcyA9PSBudWxsIClcclxuXHRcdFx0dGhpcy5fX3BlbmRpbmdNZXNzYWdlcyA9IFtdO1xyXG5cclxuXHRcdGZvciggdmFyIGk9MDsgaTxtZXNzYWdlcy5sZW5ndGg7ICsraSApXHJcblx0XHR7XHJcblx0XHRcdHZhciBtZXNzYWdlSXRlbSA9IHsgJ2NvbnRlbnQnOiBtZXNzYWdlc1tpXSB9O1xyXG5cdFx0XHR0aGlzLl9fcGVuZGluZ01lc3NhZ2VzLnB1c2goIG1lc3NhZ2VJdGVtICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU2VuZCBwZW5kaW5nIG1lc3NhZ2VzIGlmIHRoZSByZXF1ZXN0IGlzIGF2YWlsYWJsZVxyXG5cdFx0dGhpcy52ZXJpZnlDb25uZWN0aW9ucygpO1xyXG5cdFx0dGhpcy5nZXRTdGF0dXMoKTtcclxuXHR9XHJcblxyXG5cdHRoaXMuc3RhcnQgPSBmdW5jdGlvbigpXHJcblx0e1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdC8vIFN0YXJ0IHRoZSBfX3BvbGxpbmdSZXF1ZXN0XHJcblx0XHR2YXIgbWVzc2FnZSA9IHsgJ3R5cGUnOiAnaW5pdCcgfTtcclxuXHRcdHZhciBwZW5kaW5nUXVlcnkgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHRcdHNlbGYuX19wb2xsaW5nUmVxdWVzdCA9IHBlbmRpbmdRdWVyeTsgIC8vIEFzc2lnbiB0aGlzIG1lbWJlciBpbW1lZGlhdGVseSBzbyB0aGF0ICd2ZXJpZnlDb25uZWN0aW9ucygpJyBkb2Vzbid0IGNyZWF0ZSBpdHMgb3duIHF1ZXJ5XHJcblx0XHR2YXIgc2VuZFJlcXVlc3RGdW5jdGlvbiA9IGZ1bmN0aW9uKClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHNlbGYuX19zZW5kKCBwZW5kaW5nUXVlcnksIG1lc3NhZ2UgKTtcclxuXHRcdFx0fTtcclxuXHJcbi8vXHRcdGlmKCAkLmJyb3dzZXIuc2FmYXJpIHx8ICQuYnJvd3Nlci5vcGVyYSApXHJcbi8vXHRcdHtcclxuLy9cdFx0XHQvLyBPcGVyYSAmIFNhZmFyaSB0aGlua3MgdGhlIHBhZ2UgaXMgc3RpbGwgbG9hZGluZyB1bnRpbCBhbGwgdGhlIGluaXRpYWwgcmVxdWVzdHMgYXJlIHRlcm1pbmF0ZWQgKHdoaWNoIG5ldmVyIGhhcHBlbnMgaW4gY2FzZSBvZiBhIGxvbmctcG9sbGluZy4uLilcclxuLy9cdFx0XHQvLyA9PiBUaG9zZSBicm93c2VycyBzaG93cyB0aGUgJ3R1cm5pbmcgd2FpdCBpY29uJyBpbmRlZmluaXRlbHkgKFNhZmFyaSkgb3IgZXZlbiB3b3JzZSBuZXZlciBzaG93IHRoZSBwYWdlISAoT3BlcmEpXHJcblxyXG4vL1x0XHRcdC8vIEFkZCBhIGRlbGF5IGJlZm9yZSBzZW5kaW5nIHRoZSBpbml0aWFsIGxvbmctcG9sbGluZyBxdWVyeVxyXG4vL1x0XHRcdHNlbGYuJHRoaXMuZGVsYXkoIDMwMCApLnF1ZXVlKCBmdW5jdGlvbigpeyBzZW5kUmVxdWVzdEZ1bmN0aW9uKCk7IH0gKTtcclxuLy9cdFx0fVxyXG4vL1x0XHRlbHNlXHJcbi8vXHRcdHtcclxuXHRcdFx0Ly8gT3RoZXIgYnJvd3NlcnMgPT4gc2VuZGluZyB0aGUgaW5pdGlhbCBsb25nLXBvbGxpbmcgcXVlcnkgaW1tZWRpYXRlbHlcclxuXHRcdFx0c2VuZFJlcXVlc3RGdW5jdGlvbigpO1xyXG4vL1x0XHR9XHJcblxyXG5cdFx0JCh3aW5kb3cpLm9uKCAndW5sb2FkJywgZnVuY3Rpb24oKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ly8gV2hlbiBsZWF2aW5nIHRoZSBwYWdlLCBleHBsaWNpdGx5IGFib3J0IHRoZSBwb2xsaW5nIHJlcXVlc3RzIGJlY2F1c2UgSUUga2VlcHMgdGhlbSBhbGl2ZSEhIVxyXG5cdFx0XHRcdHRyeSB7IHNlbGYuX19wb2xsaW5nUmVxdWVzdC5hYm9ydCgpOyB9XHJcblx0XHRcdFx0Y2F0Y2goIGVyciApIHt9XHJcblxyXG5cdFx0XHRcdC8vIEtpbGwgYWxzbyB0aGUgXCJyZXF1ZXN0XCIgcmVxdWVzdCBpZiBhbnlcclxuXHRcdFx0XHR0cnkgeyBzZWxmLl9fbWVzc2FnZVJlcXVlc3QuYWJvcnQoKTsgfVxyXG5cdFx0XHRcdGNhdGNoKCBlcnIgKSB7fVxyXG5cdFx0XHR9ICk7XHJcblx0fVxyXG5cclxuXHR0aGlzLl9fc2VuZCA9IGZ1bmN0aW9uKHJlcXVlc3RPYmplY3Q6WE1MSHR0cFJlcXVlc3QsIG1lc3NhZ2VPYmplY3Q6TWVzc2FnZSlcclxuXHR7XHJcblx0XHR2YXIgc3RyTWVzc2FnZU9iamVjdCA9IEpTT04uc3RyaW5naWZ5KCBtZXNzYWdlT2JqZWN0ICk7XHJcblx0XHRyZXF1ZXN0T2JqZWN0Lm9wZW4oIFwiUE9TVFwiLCB0aGlzLl9faGFuZGxlclVybCwgdHJ1ZSApO1xyXG5cdFx0cmVxdWVzdE9iamVjdC5zZXRSZXF1ZXN0SGVhZGVyKCBcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiICk7XHJcblxyXG5cdFx0dmFyIGNhbGxiYWNrID0gKGZ1bmN0aW9uKHNlbGYscmVxKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkgeyBzZWxmLl9fb25SZXF1ZXN0U3RhdGVDaGFuZ2UocmVxKTsgfTtcclxuXHRcdFx0fSkoIHRoaXMsIHJlcXVlc3RPYmplY3QgKTtcclxuXHRcdHJlcXVlc3RPYmplY3Qub25yZWFkeXN0YXRlY2hhbmdlID0gY2FsbGJhY2s7XHJcblxyXG5cdFx0cmVxdWVzdE9iamVjdC5zZW5kKCBzdHJNZXNzYWdlT2JqZWN0ICk7XHJcblx0fTtcclxuXHJcblx0dGhpcy5fX29uUmVxdWVzdFN0YXRlQ2hhbmdlID0gZnVuY3Rpb24ocmVxdWVzdDpYTUxIdHRwUmVxdWVzdClcclxuXHR7XHJcblx0XHR0cnlcclxuXHRcdHtcclxuXHRcdFx0aWYoIHJlcXVlc3QucmVhZHlTdGF0ZSA9PSA0IClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKCByZXF1ZXN0ID09IHRoaXMuX19wb2xsaW5nUmVxdWVzdCApXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Ly8gVGhlIF9fcG9sbGluZ1JlcXVlc3QgZW5kZWRcclxuXHRcdFx0XHRcdHRoaXMuX19wb2xsaW5nUmVxdWVzdCA9IG51bGw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYoIHJlcXVlc3QgPT0gdGhpcy5fX21lc3NhZ2VSZXF1ZXN0IClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHQvLyBUaGUgX19tZXNzYWdlUmVxdWVzdCBlbmRlZFxyXG5cdFx0XHRcdFx0dGhpcy5fX21lc3NhZ2VSZXF1ZXN0ID0gbnVsbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHRyeSB7IHRoaXMuJHRoaXMudHJpZ2dlciggdGhpcy4kdGhpcy5pbnRlcm5hbEVycm9yRXZlbnQsICdSZWNlaXZlZCBhIHJlc3BvbnNlIGZyb20gYW4gdW5rbm93biByZXF1ZXN0JyApOyB9IGNhdGNoKGVycikge31cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmKCByZXF1ZXN0LnN0YXR1cyA9PSAyMDAgKSAgLy8gSFRUUCAyMDAgT0tcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR2YXIgc3RyUmVzcG9uc2UgPSByZXF1ZXN0LnJlc3BvbnNlVGV4dDtcclxuXHRcdFx0XHRcdHZhciByZXNwb25zZTtcclxuXHRcdFx0XHRcdHRyeVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRyZXNwb25zZSA9IEpTT04ucGFyc2UoIHN0clJlc3BvbnNlICk7XHJcblx0XHRcdFx0XHRcdHZhciByZXNwb25zZVR5cGUgPSByZXNwb25zZVsgJ3R5cGUnIF07XHJcblx0XHRcdFx0XHRcdGlmKCByZXNwb25zZVR5cGUgPT0gJ2luaXQnIClcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuX19jb25uZWN0aW9uSUQgPSByZXNwb25zZVsgJ3NlbmRlcicgXTtcclxuLy9jb25zb2xlLmxvZyggJ0NJRCcsIHRoaXMuX19jb25uZWN0aW9uSUQgKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0dHJ5XHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy4kdGhpcy50cmlnZ2VyKCB0aGlzLiR0aGlzLmNvbm5lY3Rpb25JRFJlY2VpdmVkRXZlbnQsIHRoaXMuX19jb25uZWN0aW9uSUQgKTtcclxuXHRcdFx0XHRcdFx0XHR9IGNhdGNoKCBlcnIgKSB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBUaGUgYXNzaWduZWQgbWVzc2FnZSBoYW5kbGVyIHRocmV3IGFuIGV4Y2VwdGlvblxyXG5cdFx0XHRcdFx0XHRcdFx0dHJ5IHsgdGhpcy4kdGhpcy50cmlnZ2VyKCB0aGlzLiR0aGlzLm1lc3NhZ2VIYW5kbGVyRmFpbGVkRXZlbnQsIGVyciApOyB9IGNhdGNoKGVycikge31cclxuXHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIEluaXRpYXRlIGluaXRpYWwgY29ubmVjdGlvblxyXG5cdFx0XHRcdFx0XHRcdHRoaXMudmVyaWZ5Q29ubmVjdGlvbnMoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRlbHNlIGlmKCByZXNwb25zZVR5cGUgPT0gJ3Jlc2V0JyApXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHQvLyBSZXN0YXJ0IHRoZSBfX3BvbGxpbmdSZXF1ZXN0XHJcblx0XHRcdFx0XHRcdFx0dGhpcy52ZXJpZnlDb25uZWN0aW9ucygpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGVsc2UgaWYoIHJlc3BvbnNlVHlwZSA9PSAnbG9nb3V0JyApXHJcblx0XHRcdFx0XHRcdHtcclxuLy9jb25zb2xlLmxvZyggJ0xPR09VVCcgKTtcclxuXHRcdFx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IHRoaXMuX19sb2dvdXRVcmw7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZSBpZiggcmVzcG9uc2VUeXBlID09ICdtZXNzYWdlcycgKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0dmFyIG1lc3NhZ2VzTGlzdCA9IHJlc3BvbnNlWyAnbWVzc2FnZXMnIF07XHJcblx0XHRcdFx0XHRcdFx0Zm9yKCB2YXIgaT0wOyBpPG1lc3NhZ2VzTGlzdC5sZW5ndGg7ICsraSApXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0dHJ5XHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBtZXNzYWdlQ29udGVudCA9IG1lc3NhZ2VzTGlzdFsgaSBdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgdHlwZSA9IG1lc3NhZ2VDb250ZW50WyAndHlwZScgXTtcclxuLy9jb25zb2xlLmxvZyggJ1JDVicsIG1lc3NhZ2VDb250ZW50ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuJHRoaXMudHJpZ2dlciggdHlwZSwgbWVzc2FnZUNvbnRlbnQgKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2goIGVyciApIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gVGhlIGFzc2lnbmVkIG1lc3NhZ2UgaGFuZGxlciB0aHJldyBhbiBleGNlcHRpb25cclxuXHRcdFx0XHRcdFx0XHRcdFx0dHJ5IHsgdGhpcy4kdGhpcy50cmlnZ2VyKCB0aGlzLiR0aGlzLm1lc3NhZ2VIYW5kbGVyRmFpbGVkRXZlbnQsIGVyciApOyB9IGNhdGNoKGVycikge31cclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0dGhpcy52ZXJpZnlDb25uZWN0aW9ucygpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHRocm93ICdVbmtub3duIHJlc3BvbnNlIHR5cGUgXFwnJyArIHJlc3BvbnNlVHlwZSArICdcXCcnO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGNhdGNoKCBlcnIgKSB7XHJcblx0XHRcdFx0XHRcdHRyeSB7IHRoaXMuJHRoaXMudHJpZ2dlciggdGhpcy4kdGhpcy5pbnRlcm5hbEVycm9yRXZlbnQsICdKU09OIFBhcnNlIEVycm9yOiAnICsgZXJyICk7IH0gY2F0Y2goZXJyKSB7fVxyXG5cdFx0XHRcdFx0XHR0aGlzLnZlcmlmeUNvbm5lY3Rpb25zKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYoIChyZXF1ZXN0LnN0YXR1cyA9PSAwLypBbGwgYnJvd3NlcnMqLykgfHwgKHJlcXVlc3Quc3RhdHVzID09IDEyMDMxLypPbmx5IElFKi8pIClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHQvLyBSZXF1ZXN0IGFib3J0ZWQgKGUuZy4gcmVkaXJlY3RpbmcgdG8gYW5vdGhlciBwYWdlKVxyXG5cdFx0XHRcdFx0Ly8gdGhpcy52ZXJpZnlDb25uZWN0aW9ucygpOyAgPD0gRG9uJ3QgdHJ5IHRvIHJlY29ubmVjdFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGlmKCByZXF1ZXN0LnN0YXR1cyA9PSAxMjAwMi8qT25seSBJRSovIClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHQvLyBSZXF1ZXN0IHRpbWVvdXRcclxuLy9jb25zb2xlLmxvZyggJ19fb25SZXF1ZXN0U3RhdGVDaGFuZ2UgLSByZXF1ZXN0LnN0YXR1cz0xMjAwMiAodGltZW91dCknICk7XHJcbi8vIFRPRE86IEFsYWluOiBXYXJuaW5nICg/KVxyXG5cdFx0XHRcdFx0dGhpcy52ZXJpZnlDb25uZWN0aW9ucygpOyAgLy8gVHJ5IHJlY29ubmVjdFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHJ5IHsgdGhpcy4kdGhpcy50cmlnZ2VyKCB0aGlzLiR0aGlzLmludGVybmFsRXJyb3JFdmVudCwgJ1NlcnZlciBlcnJvciAoc3RhdHVzPVwiJyArIHJlcXVlc3Quc3RhdHVzICsgJ1wiKScgKTsgfSBjYXRjaChlcnIpIHt9XHJcbi8vIFRPRE86IEFsYWluOiBNYXhpbXVtIG51bWJlciBvZiByZXRyeSB0aGVuIGRlZmluaXRlbHkgZGlzY29ubmVjdFxyXG5cdFx0XHRcdFx0Ly93aW5kb3cubG9jYXRpb24gPSB0aGlzLl9fbG9nb3V0VXJsOyAgLy8gUmVkaXJlY3QgdG8gbG9nb3V0IHBhZ2VcclxuXHRcdFx0XHRcdHRoaXMudmVyaWZ5Q29ubmVjdGlvbnMoKTsgIC8vIFRyeSByZWNvbm5lY3RcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ly8gXCJyZWFkeVN0YXRlICE9IDRcIiA9PSBzdGlsbCBydW5uaW5nXHJcblx0XHRcdFx0Ly8gTk9PUFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRmaW5hbGx5XHJcblx0XHR7XHJcblx0XHRcdHRoaXMuZ2V0U3RhdHVzKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cdC8vIFJlZGlyZWN0ZWQgZnVuY3Rpb25zICdqcXVlcnkgb2JqZWN0JyA9PiAnb3JpZ2luYWwgb2JqZWN0JzogLy9cclxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5cdCR0aGlzLnN0YXJ0XHRcdFx0XHRcdFx0PSBmdW5jdGlvbigpIHsgdGhpc0RPTS5zdGFydCgpOyB9O1xyXG5cdCR0aGlzLmdldFN5bmNlZEhhbmRsZXJVcmxcdFx0PSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXNET00uZ2V0U3luY2VkSGFuZGxlclVybCgpOyB9O1xyXG5cdCR0aGlzLmdldFN0YXR1c1x0XHRcdFx0XHQ9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpc0RPTS5nZXRTdGF0dXMoKTsgfTtcclxuXHQkdGhpcy5zZW5kTWVzc2FnZVx0XHRcdFx0PSBmdW5jdGlvbihtZXNzYWdlOk1lc3NhZ2UpIHsgdGhpc0RPTS5zZW5kTWVzc2FnZXMoIFttZXNzYWdlXSApOyB9O1xyXG5cdCR0aGlzLnNlbmRNZXNzYWdlc1x0XHRcdFx0PSBmdW5jdGlvbihtZXNzYWdlczpNZXNzYWdlW10pIHsgdGhpc0RPTS5zZW5kTWVzc2FnZXMoIG1lc3NhZ2VzICk7IH07XHJcblx0JHRoaXMudmVyaWZ5Q29ubmVjdGlvbnNcdFx0XHQ9IGZ1bmN0aW9uKCkgeyB0aGlzRE9NLnZlcmlmeUNvbm5lY3Rpb25zKCk7IH07XHJcblxyXG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHQvLyBJbXBsZW1lbnQgQ2xpZW50Lk1lc3NhZ2VIYW5kbGVyIC8vXHJcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuXHQkdGhpcy5vbkNvbm5lY3Rpb25JZFJlY2VpdmVkID0gZnVuY3Rpb24oY2FsbGJhY2s6KGNpZDpzdHJpbmcpPT52b2lkKVxyXG5cdFx0e1xyXG5cdFx0XHR0aGlzRE9NLm9uQ29ubmVjdGlvbklkUmVjZWl2ZWQoY2FsbGJhY2spO1xyXG5cdFx0XHRyZXR1cm4gJHRoaXM7XHJcblx0XHR9O1xyXG5cdCR0aGlzLm9uU3RhdHVzQ2hhbmdlZCA9IGZ1bmN0aW9uKGNhbGxiYWNrOihzdGF0dXM6Q2xpZW50U3RhdHVzKT0+dm9pZClcclxuXHRcdHtcclxuXHRcdFx0JHRoaXMuYmluZCggJHRoaXMuc3RhdHVzQ2hhbmdlZEV2ZW50LCBmdW5jdGlvbihldnQ6YW55LCBzdGF0dXM6Q2xpZW50U3RhdHVzKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGNhbGxiYWNrKCBzdGF0dXMgKTtcclxuXHRcdFx0XHR9ICk7XHJcblx0XHRcdHJldHVybiAkdGhpcztcclxuXHRcdH07XHJcblx0JHRoaXMub25JbnRlcm5hbEVycm9yID0gZnVuY3Rpb24oY2FsbGJhY2s6KG1lc3NhZ2U6c3RyaW5nKT0+dm9pZClcclxuXHRcdHtcclxuXHRcdFx0JHRoaXMuYmluZCggJHRoaXMuaW50ZXJuYWxFcnJvckV2ZW50LCBmdW5jdGlvbihlOmFueSxtZXNzYWdlOnN0cmluZylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR0cnlcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0Y2FsbGJhY2sobWVzc2FnZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRjYXRjaChlcnIpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdC8vIE5COiBSZWFsbHkgbm90IG11Y2ggd2UgY2FuIGRvIGhlcmUgLi4uXHJcblx0XHRcdFx0XHRcdGlmKCAoY29uc29sZSAhPSBudWxsKSAmJiAoY29uc29sZS5lcnJvciAhPSBudWxsKSApXHJcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvciggJ0Vycm9yIHdoaWxlIGludm9raW5nIGxvbmdfcG9sbGluZ19jbGllbnRfZXJyb3IgZXZlbnQnLCBlcnIgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9ICk7XHJcblx0XHRcdHJldHVybiAkdGhpcztcclxuXHRcdH07XHJcblx0JHRoaXMub25NZXNzYWdlSGFuZGxlckZhaWxlZCA9IGZ1bmN0aW9uKGNhbGxiYWNrOihtZXNzYWdlOnN0cmluZyk9PnZvaWQpXHJcblx0XHR7XHJcblx0XHRcdCR0aGlzLmJpbmQoICR0aGlzLm1lc3NhZ2VIYW5kbGVyRmFpbGVkRXZlbnQsIGZ1bmN0aW9uKGV2dDphbnksZXJyb3I6YW55KVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHRyeVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRjYWxsYmFjayhlcnJvcik7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRjYXRjaChlcnIpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdCR0aGlzLnRyaWdnZXIoICR0aGlzLmludGVybmFsRXJyb3JFdmVudCwgJ0Vycm9yIHdoaWxlIGludm9raW5nIG1lc3NhZ2VfaGFuZGxlcl9mYWlsZWQgZXZlbnQ6ICcrZXJyICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSApO1xyXG5cdFx0XHRyZXR1cm4gJHRoaXM7XHJcblx0XHR9O1xyXG5cclxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHQvLyBJbml0aWFsaXphdGlvbjogLy9cclxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcblx0Ly8gUmV0dXJuIHRoZSBKUXVlcnkgb2JqZWN0XHJcblx0cmV0dXJuICR0aGlzO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBIdHRwQ2xpZW50O1xyXG4iLCLvu78vL1xyXG4vLyBDb21tb25MaWJzL1dlYi9Mb25nUG9sbGluZy9KU0NsaWVudC9XZWJTb2NrZXRDbGllbnQudHNcclxuLy9cclxuLy8gQXV0aG9yOlxyXG4vLyAgIEFsYWluIENBTyAoYWxhaW4uY2FvQHNpZ21hY29uc28uY29tKVxyXG4vL1xyXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTggU2lnbWFDb25zb1xyXG4vL1xyXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmdcclxuLy8gYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXHJcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xyXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXHJcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xyXG4vLyBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG9cclxuLy8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxyXG4vL1xyXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxyXG4vLyBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuLy9cclxuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcclxuLy8gRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXHJcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXHJcbi8vIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkVcclxuLy8gTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTlxyXG4vLyBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT05cclxuLy8gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXHJcbi8vXHJcblxyXG5pbXBvcnQgeyBNZXNzYWdlSGFuZGxlciwgRXZlbnRzSGFuZGxlciwgQ2xpZW50U3RhdHVzLCBNZXNzYWdlLCBjcmVhdGVFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi9DbGllbnRcIjtcclxuXHJcbmRlY2xhcmUgdmFyICQ6IGFueTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlcnJvcihtZXNzYWdlOnN0cmluZylcclxue1xyXG5cdGFsZXJ0KCBtZXNzYWdlICk7XHJcblx0dGhyb3cgbWVzc2FnZTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFdlYlNvY2tldENsaWVudCBpbXBsZW1lbnRzIE1lc3NhZ2VIYW5kbGVyXHJcbntcclxuXHRwcml2YXRlXHRldmVudHNcdFx0XHRcdDogRXZlbnRzSGFuZGxlcjtcclxuXHRwdWJsaWNcdGRlYnVnXHRcdFx0XHQ6IGJvb2xlYW47XHJcblxyXG5cdHByaXZhdGVcdGhhbmRsZXJVcmxcdFx0XHQ6IHN0cmluZztcclxuXHRwcml2YXRlXHRsb2dvdXRVcmxcdFx0XHQ6IHN0cmluZztcclxuXHRwcml2YXRlXHRrZWVwQWxpdmVVcmxcdFx0OiBzdHJpbmc7XHJcblx0cHJpdmF0ZVx0a2VlcEFsaXZlVGltZW91dFx0OiBudW1iZXI7XHJcblx0cHJpdmF0ZVx0a2VlcEFsaXZlVGltZXJcdFx0OiBudW1iZXI7XHJcblx0cHJpdmF0ZVx0c3luY2VkSGFuZGxlclVybFx0OiBzdHJpbmc7XHJcblx0cHJpdmF0ZVx0c3RhdHVzXHRcdFx0XHQ6IENsaWVudFN0YXR1cztcclxuXHRwcml2YXRlXHRjb25uZWN0aW9uSWRcdFx0OiBzdHJpbmc7XHJcblx0cHJpdmF0ZVx0d2ViU29ja2V0XHRcdFx0OiBXZWJTb2NrZXQ7XHJcblx0cHJpdmF0ZVx0c2VuZE1lc3NhZ2VVaWRcdFx0OiBudW1iZXI7XHJcblx0cHJpdmF0ZVx0cGVuZGluZ01lc3NhZ2VzXHRcdDogeyBtZXNzYWdlOk1lc3NhZ2UsIGNhbGxiYWNrPzooZXZ0PzphbnksbWVzc2FnZT86TWVzc2FnZSk9PnZvaWQgfVtdO1xyXG5cclxuXHRwdWJsaWNcdHN0YXJ0XHRcdFx0XHRcdFx0OiAoKT0+dm9pZDtcclxuXHRwdWJsaWNcdHNlbmRNZXNzYWdlXHRcdFx0XHRcdDogKG1lc3NhZ2U6TWVzc2FnZSwgY2FsbGJhY2s/OihldnQ/OmFueSxtZXNzYWdlPzpNZXNzYWdlKT0+dm9pZCk9PldlYlNvY2tldENsaWVudDtcclxuXHRwcml2YXRlIHNlbmRQZW5kaW5nTWVzc2FnZXNcdFx0XHQ6ICgpPT52b2lkO1xyXG5cdHB1YmxpY1x0Z2V0Q29ubmVjdGlvbklkXHRcdFx0XHQ6ICgpPT5zdHJpbmc7XHJcblx0cHVibGljXHRnZXRTdGF0dXNcdFx0XHRcdFx0OiAoKT0+Q2xpZW50U3RhdHVzO1xyXG5cdHByaXZhdGVcdGNoZWNrS2VlcEFsaXZlVGltZW91dFx0XHQ6ICgpPT52b2lkO1xyXG5cdHB1YmxpY1x0Z2V0U3luY2VkSGFuZGxlclVybFx0XHRcdDogKCk9PnN0cmluZztcclxuXHJcblx0Ly8gRm9yIEV2ZW50c0hhbmRsZXI6XHJcblx0cHVibGljXHRiaW5kXHRcdFx0XHRcdFx0OiAobmFtZTpzdHJpbmcsIGNhbGxiYWNrOihldnQ/OmFueSxtZXNzYWdlPzpNZXNzYWdlKT0+dm9pZCk9PkV2ZW50c0hhbmRsZXI7XHJcblx0cHVibGljXHR1bmJpbmRcdFx0XHRcdFx0XHQ6IChuYW1lOnN0cmluZywgY2FsbGJhY2s/OihldnQ/OmFueSk9PnZvaWQpPT5FdmVudHNIYW5kbGVyO1xyXG5cdHB1YmxpY1x0dHJpZ2dlclx0XHRcdFx0XHRcdDogKG5hbWU6c3RyaW5nLCBwPzphbnkpPT5FdmVudHNIYW5kbGVyO1xyXG5cclxuXHQvLyBFdmVudHM6XHJcblx0cHJpdmF0ZVx0dHJpZ2dlclN0YXR1c0NoYW5nZWRcdFx0OiAoc3RhdHVzOkNsaWVudFN0YXR1cyk9PnZvaWQ7XHJcblx0cHVibGljXHRvblN0YXR1c0NoYW5nZWRcdFx0XHRcdDogKGNhbGxiYWNrOihzdGF0dXM6Q2xpZW50U3RhdHVzKT0+dm9pZCk9PldlYlNvY2tldENsaWVudDtcclxuXHRwcml2YXRlXHR0cmlnZ2VySW50ZXJuYWxFcnJvclx0XHQ6IChtZXNzYWdlOnN0cmluZyk9PnZvaWQ7XHJcblx0cHVibGljXHRvbkludGVybmFsRXJyb3JcdFx0XHRcdDogKGNhbGxiYWNrOihtZXNzYWdlOnN0cmluZyk9PnZvaWQpPT5XZWJTb2NrZXRDbGllbnQ7XHJcblx0cHJpdmF0ZVx0dHJpZ2dlck1lc3NhZ2VIYW5kbGVyRmFpbGVkXHQ6IChlcnJvcjphbnkpPT52b2lkO1xyXG5cdHB1YmxpY1x0b25NZXNzYWdlSGFuZGxlckZhaWxlZFx0XHQ6IChjYWxsYmFjazooZXJyb3I6YW55KT0+dm9pZCk9PldlYlNvY2tldENsaWVudDtcclxuXHRwcml2YXRlXHR0cmlnZ2VyQ29ubmVjdGlvbklkUmVjZWl2ZWQgOiAoY29ubmVjdGlvbklkOnN0cmluZyk9PnZvaWQ7XHJcblx0cHVibGljXHRvbkNvbm5lY3Rpb25JZFJlY2VpdmVkXHRcdDogKGNhbGxiYWNrOihjb25uZWN0aW9uSWQ6c3RyaW5nKT0+dm9pZCk9PldlYlNvY2tldENsaWVudDtcclxuXHJcblx0Y29uc3RydWN0b3IocDp7XHRkZWJ1Zz9cdFx0XHRcdDogYm9vbGVhbixcclxuXHRcdFx0XHRcdGhhbmRsZXJVcmxcdFx0XHQ6IHN0cmluZyxcdC8vIFJlcXVpcmVkOiBUaGUgVVJMIG9mIHRoZSBzZXJ2ZXIncyBXZWJTb2NrZXQgbGlzdGVuZXJcclxuXHRcdFx0XHRcdGtlZXBBbGl2ZVVybD9cdFx0OiBzdHJpbmcsXHQvLyBPcHRpb25hbDogU2V0IHRvIGNyZWF0ZSBhIGR1bW15IEhUVFAgcmVxdWVzdCB0byBrZWVwIHRoZSBBU1AuTkVUIHNlc3Npb24gYWxpdmVcclxuXHRcdFx0XHRcdGtlZXBBbGl2ZVRpbWVvdXQ/XHQ6IG51bWJlcixcdC8vIE9wdGlvbmFsOiBJZiAna2VlcEFsaXZlVXJsJyBpcyBzZXQsIHRoaXMgd2lsbCBiZSB0aGUgaW50ZXJ2YWwgYmV0d2VlbiB0aGUgZHVtbXkgSFRUUCByZXF1ZXN0cyAoZGVmYXVsdDogMTAqNjAqMTAwMCBtaWxpc2Vjb25kcyA9IDEwIG1pbnV0ZXMpXHJcblx0XHRcdFx0XHRsb2dvdXRVcmxcdFx0XHQ6IHN0cmluZyxcdC8vIFJlcXVpcmVkOiBUaGUgVVJMIHRvIHJlZGlyZWN0IHRvIHdoZW4gdGhlIHNlcnZlciBhc2tzIHRvIGxvZ291dFxyXG5cdFx0XHRcdFx0c3luY2VkSGFuZGxlclVybD9cdDogc3RyaW5nIH0pXHQvLyBPcHRpb25hbDogVGhlIFVSTCB0byB0aGUgU3luY2VkIEhUVFAgaGFuZGxlciBpZiB1c2VkIChlLmcuIGZpbGUgdXBsb2FkcylcclxuXHR7XHJcblx0XHRwID0gJC5leHRlbmQoIHtcdGRlYnVnXHRcdFx0XHQ6IGZhbHNlLFxyXG5cdFx0XHRcdFx0XHRoYW5kbGVyVXJsXHRcdFx0OiAnSEFORExFUl9VUkxfVU5ERUZJTkVEJyxcclxuXHRcdFx0XHRcdFx0a2VlcEFsaXZlVXJsXHRcdDogbnVsbCxcclxuXHRcdFx0XHRcdFx0a2VlcEFsaXZlVGltZW91dFx0OiA2MDAwMDAsXHJcblx0XHRcdFx0XHRcdGxvZ291dFVybFx0XHRcdDogJ0xPR09VVF9VUkxfVU5ERUZJTkVEJyxcclxuXHRcdFx0XHRcdFx0c3luY2VkSGFuZGxlclVybFx0OiBudWxsLFxyXG5cdFx0XHRcdFx0fSwgcCApO1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdHNlbGYuZXZlbnRzXHRcdFx0XHQ9IGNyZWF0ZUV2ZW50SGFuZGxlcigpO1xyXG5cdFx0c2VsZi5kZWJ1Z1x0XHRcdFx0PSAocC5kZWJ1ZyA9PSB0cnVlKTtcclxuXHRcdHNlbGYuaGFuZGxlclVybFx0XHRcdD0gcC5oYW5kbGVyVXJsO1xyXG5cdFx0c2VsZi5rZWVwQWxpdmVVcmxcdFx0PSBwLmtlZXBBbGl2ZVVybDtcclxuXHRcdHNlbGYua2VlcEFsaXZlVGltZW91dFx0PSBwLmtlZXBBbGl2ZVRpbWVvdXQ7XHJcblx0XHRzZWxmLmtlZXBBbGl2ZVRpbWVyXHRcdD0gbnVsbDtcclxuXHRcdHNlbGYubG9nb3V0VXJsXHRcdFx0PSBwLmxvZ291dFVybDtcclxuXHRcdHNlbGYuc3luY2VkSGFuZGxlclVybFx0PSBwLnN5bmNlZEhhbmRsZXJVcmw7XHJcblx0XHRzZWxmLnN0YXR1c1x0XHRcdFx0PSBDbGllbnRTdGF0dXMuRElTQ09OTkVDVEVEO1xyXG5cdFx0c2VsZi5jb25uZWN0aW9uSWRcdFx0PSBudWxsO1xyXG5cdFx0c2VsZi53ZWJTb2NrZXRcdFx0XHQ9IG51bGw7XHJcblx0XHRzZWxmLnNlbmRNZXNzYWdlVWlkXHRcdD0gMDtcclxuXHRcdHNlbGYucGVuZGluZ01lc3NhZ2VzXHQ9IFtdO1xyXG5cclxuXHRcdC8vIFJlZGlyZWN0IGpRdWVyeSdzIG1ldGhvZHMgdG8gJ3NlbGYuZXZlbnRzJ1xyXG5cdFx0c2VsZi5iaW5kXHRcdFx0XHRcdFx0PSBmdW5jdGlvbigpeyByZXR1cm4gc2VsZi5ldmVudHMuYmluZC5hcHBseSggc2VsZi5ldmVudHMsIGFyZ3VtZW50cyApOyB9O1xyXG5cdFx0c2VsZi51bmJpbmRcdFx0XHRcdFx0XHQ9IGZ1bmN0aW9uKCl7IHJldHVybiBzZWxmLmV2ZW50cy51bmJpbmQuYXBwbHkoIHNlbGYuZXZlbnRzLCBhcmd1bWVudHMgKTsgfTtcclxuXHRcdHNlbGYudHJpZ2dlclx0XHRcdFx0XHQ9IGZ1bmN0aW9uKCl7IHJldHVybiBzZWxmLmV2ZW50cy50cmlnZ2VyLmFwcGx5KCBzZWxmLmV2ZW50cywgYXJndW1lbnRzICk7IH07XHJcblxyXG5cdFx0Ly8gTWlzY1xyXG5cdFx0c2VsZi5nZXRTeW5jZWRIYW5kbGVyVXJsID0gZnVuY3Rpb24oKXsgcmV0dXJuIHNlbGYuc3luY2VkSGFuZGxlclVybDsgfTtcclxuXHJcblx0XHQvLyBJbml0IGV2ZW50IGhhbmRsZXJzXHJcblxyXG5cdFx0c2VsZi50cmlnZ2VySW50ZXJuYWxFcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2U6c3RyaW5nKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0c2VsZi5ldmVudHMudHJpZ2dlciggJ2xvbmdfcG9sbGluZ19jbGllbnRfZXJyb3InLCBtZXNzYWdlICk7XHJcblx0XHRcdH07XHJcblx0XHRzZWxmLm9uSW50ZXJuYWxFcnJvciA9IGZ1bmN0aW9uKGNhbGxiYWNrOihtZXNzYWdlOnN0cmluZyk9PnZvaWQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRzZWxmLmV2ZW50cy5iaW5kKCAnbG9uZ19wb2xsaW5nX2NsaWVudF9lcnJvcicsIGZ1bmN0aW9uKGUsbWVzc2FnZTpzdHJpbmcpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHRyeVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2sobWVzc2FnZSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0Y2F0Y2goZXJyKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0Ly8gTkI6IFJlYWxseSBub3QgbXVjaCB3ZSBjYW4gZG8gaGVyZSAuLi5cclxuXHRcdFx0XHRcdFx0XHRpZiggKGNvbnNvbGUgIT0gbnVsbCkgJiYgKGNvbnNvbGUuZXJyb3IgIT0gbnVsbCkgKVxyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvciggJ0Vycm9yIHdoaWxlIGludm9raW5nIGxvbmdfcG9sbGluZ19jbGllbnRfZXJyb3IgZXZlbnQnLCBlcnIgKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSApO1xyXG5cdFx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdHNlbGYudHJpZ2dlclN0YXR1c0NoYW5nZWQgPSBmdW5jdGlvbihzdGF0dXM6Q2xpZW50U3RhdHVzKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0c2VsZi5ldmVudHMudHJpZ2dlciggJ2xvbmdfcG9sbGluZ19jbGllbnRfc3RhdHVzX2NoYW5nZWQnLCBzdGF0dXMgKTtcclxuXHRcdFx0fVxyXG5cdFx0c2VsZi5vblN0YXR1c0NoYW5nZWQgPSBmdW5jdGlvbihjYWxsYmFjazooc3RhdHVzOkNsaWVudFN0YXR1cyk9PnZvaWQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRzZWxmLmV2ZW50cy5iaW5kKCAnbG9uZ19wb2xsaW5nX2NsaWVudF9zdGF0dXNfY2hhbmdlZCcsIGZ1bmN0aW9uKGV2dCxzdGF0dXM6Q2xpZW50U3RhdHVzKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR0cnkgeyBjYWxsYmFjayhzdGF0dXMpOyB9XHJcblx0XHRcdFx0XHRcdGNhdGNoKGVycikgeyBzZWxmLnRyaWdnZXJJbnRlcm5hbEVycm9yKCAnRXJyb3Igd2hpbGUgaW52b2tpbmcgbG9uZ19wb2xsaW5nX2NsaWVudF9zdGF0dXNfY2hhbmdlZCBldmVudDogJytlcnIgKTsgfVxyXG5cdFx0XHRcdFx0fSApO1xyXG5cdFx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdHNlbGYudHJpZ2dlck1lc3NhZ2VIYW5kbGVyRmFpbGVkID0gZnVuY3Rpb24oZXJyb3I6YW55KVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0c2VsZi5ldmVudHMudHJpZ2dlciggJ21lc3NhZ2VfaGFuZGxlcl9mYWlsZWQnLCBlcnJvciApO1xyXG5cdFx0XHR9XHJcblx0XHRzZWxmLm9uTWVzc2FnZUhhbmRsZXJGYWlsZWQgPSBmdW5jdGlvbihjYWxsYmFjazoobWVzc2FnZTpzdHJpbmcpPT52b2lkKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0c2VsZi5ldmVudHMuYmluZCggJ21lc3NhZ2VfaGFuZGxlcl9mYWlsZWQnLCBmdW5jdGlvbihldnQsZXJyb3I6YW55KVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR0cnkgeyBjYWxsYmFjayhlcnJvcik7IH1cclxuXHRcdFx0XHRcdFx0Y2F0Y2goZXJyKSB7IHNlbGYudHJpZ2dlckludGVybmFsRXJyb3IoICdFcnJvciB3aGlsZSBpbnZva2luZyBtZXNzYWdlX2hhbmRsZXJfZmFpbGVkIGV2ZW50OiAnK2VyciApOyB9XHJcblx0XHRcdFx0XHR9ICk7XHJcblx0XHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0c2VsZi50cmlnZ2VyQ29ubmVjdGlvbklkUmVjZWl2ZWQgPSBmdW5jdGlvbihjb25uZWN0aW9uSWQ6c3RyaW5nKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0c2VsZi5ldmVudHMudHJpZ2dlciggJ2xvbmdfcG9sbGluZ19jbGllbnRfY29ubmVjdGlvbl9pZCcsIGNvbm5lY3Rpb25JZCApO1xyXG5cdFx0XHR9O1xyXG5cdFx0c2VsZi5vbkNvbm5lY3Rpb25JZFJlY2VpdmVkID0gZnVuY3Rpb24oY2FsbGJhY2s6KGNvbm5lY3Rpb25JZDpzdHJpbmcpPT52b2lkKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoIHNlbGYuY29ubmVjdGlvbklkICE9IG51bGwgKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdC8vIEFscmVhZHkgcmVjZWl2ZWRcclxuXHRcdFx0XHRcdGNhbGxiYWNrKCBzZWxmLmNvbm5lY3Rpb25JZCApO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIC8vIERlZmVyXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0c2VsZi5ldmVudHMuYmluZCggJ2xvbmdfcG9sbGluZ19jbGllbnRfY29ubmVjdGlvbl9pZCcsIGZ1bmN0aW9uKGV2dCxjb25uZWN0aW9uSWQ6c3RyaW5nKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0dHJ5IHsgY2FsbGJhY2soY29ubmVjdGlvbklkKTsgfVxyXG5cdFx0XHRcdFx0XHRcdGNhdGNoKGVycikgeyBzZWxmLnRyaWdnZXJJbnRlcm5hbEVycm9yKCAnRXJyb3Igd2hpbGUgaW52b2tpbmcgbG9uZ19wb2xsaW5nX2NsaWVudF9jb25uZWN0aW9uX2lkIGV2ZW50OiAnK2VyciApOyB9XHJcblx0XHRcdFx0XHRcdH0gKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0c2VsZi5nZXRDb25uZWN0aW9uSWRcdFx0XHQ9IGZ1bmN0aW9uKCl7IHJldHVybiBzZWxmLmNvbm5lY3Rpb25JZDsgfTtcclxuXHRcdHNlbGYuZ2V0U3RhdHVzXHRcdFx0XHRcdD0gZnVuY3Rpb24oKXsgcmV0dXJuIHNlbGYuc3RhdHVzOyB9O1xyXG5cclxuXHRcdC8vIEluaXQgV2ViU29ja2V0IGNvbW11bmljYXRpb25zXHJcblxyXG5cdFx0dmFyIG9uU29ja2V0RXJyb3IgPSBmdW5jdGlvbihlOmFueSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKCBzZWxmLmRlYnVnIClcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCAnV2ViU29ja2V0IGVycm9yJywgZSApO1xyXG5cclxuXHRcdFx0XHRzZWxmLnRyaWdnZXJJbnRlcm5hbEVycm9yKCAnV2ViU29ja2V0IGVycm9yOiAnK2UubWVzc2FnZSApO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdHZhciBvblNvY2tldENsb3NlID0gZnVuY3Rpb24oKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoIHNlbGYuZGVidWcgKVxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coICdXZWJTb2NrZXQgY2xvc2VkJyApO1xyXG5cclxuXHRcdFx0XHRzZWxmLmNvbm5lY3Rpb25JZCA9IG51bGw7XHJcblx0XHRcdFx0c2VsZi53ZWJTb2NrZXQgPSBudWxsO1xyXG5cclxuXHRcdFx0XHRzZWxmLnN0YXR1cyA9IENsaWVudFN0YXR1cy5ESVNDT05ORUNURUQ7XHJcblx0XHRcdFx0c2VsZi50cmlnZ2VyU3RhdHVzQ2hhbmdlZCggc2VsZi5zdGF0dXMgKTtcclxuXHRcdFx0fTtcclxuXHJcblx0XHR2YXIgb25Tb2NrZXRNZXNzYWdlSW5pdCA9IGZ1bmN0aW9uKGU6YW55KVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dHJ5XHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dmFyIGVycm9yUHJlZml4ID0gJ0pTT04gUGFyc2UgRXJyb3I6ICc7XHJcblx0XHRcdFx0XHR2YXIgbWVzc2FnZSA9IEpTT04ucGFyc2UoIGUuZGF0YSApO1xyXG5cdFx0XHRcdFx0dmFyIGVycm9yUHJlZml4ID0gJyc7XHJcblxyXG5cdFx0XHRcdFx0dmFyIHR5cGUgPSBtZXNzYWdlWyd0eXBlJ107XHJcblx0XHRcdFx0XHRpZiggdHlwZSAhPSAnaW5pdCcgKVxyXG5cdFx0XHRcdFx0XHR0aHJvdyAnVW5leHBlY3RlZCBtZXNzYWdlIHR5cGUgXCInK3R5cGUrJ1wiIDsgRXhwZWN0ZWQgXCJpbml0XCInO1xyXG5cclxuXHRcdFx0XHRcdHZhciBjb25uZWN0aW9uSWQgPSBtZXNzYWdlWydzZW5kZXInXTtcclxuXHRcdFx0XHRcdGlmKCBjb25uZWN0aW9uSWQgPT0gbnVsbCApXHJcblx0XHRcdFx0XHRcdHRocm93ICdTZXJ2ZXIgZGlkIG5vdCByZXNwb25kZWQgd2l0aCBDb25uZWN0aW9uSUQnO1xyXG5cdFx0XHRcdFx0c2VsZi5jb25uZWN0aW9uSWQgPSBjb25uZWN0aW9uSWQ7XHJcblxyXG5cdFx0XHRcdFx0aWYoIHNlbGYuZGVidWcgKVxyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyggJ21lc3NhZ2UgcmVjdicsIG1lc3NhZ2UgKTtcclxuXHJcblx0XHRcdFx0XHQvLyBSZWFkeSB0byByZWNlaXZlICYgc3Vic2VxdWVudCBtZXNzYWdlcyBtdXN0IGdvIHRvIHRoZSAnb25NZXNzYWdlJyBoYW5kbGVyXHJcblx0XHRcdFx0XHRzZWxmLnN0YXR1cyA9IENsaWVudFN0YXR1cy5DT05ORUNURUQ7XHJcblx0XHRcdFx0XHRzZWxmLndlYlNvY2tldC5vbm1lc3NhZ2UgPSBvblNvY2tldE1lc3NhZ2U7XHJcblxyXG5cdFx0XHRcdFx0Ly8gU3RhcnQga2VlcGFsaXZlIHRpbWVyXHJcblx0XHRcdFx0XHR2YXIgZXJyb3JQcmVmaXggPSAnQ291bGQgbm90IHN0YXJ0IGtlZXBhbGl2ZSB0aW1lcjogJztcclxuXHRcdFx0XHRcdHNlbGYuY2hlY2tLZWVwQWxpdmVUaW1lb3V0KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNhdGNoKCBlcnIgKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHRyeSB7IHNlbGYudHJpZ2dlckludGVybmFsRXJyb3IoIGVycm9yUHJlZml4K2VyciApOyB9IGNhdGNoKGVycikge31cclxuXHRcdFx0XHRcdHJldHVybjsgIC8vIEZhdGFsIDsgU3RvcCBoZXJlIC4uLlxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gSW52b2tlIGV2ZW50c1xyXG5cdFx0XHRcdHNlbGYudHJpZ2dlclN0YXR1c0NoYW5nZWQoIHNlbGYuc3RhdHVzICk7XHJcblx0XHRcdFx0c2VsZi50cmlnZ2VyQ29ubmVjdGlvbklkUmVjZWl2ZWQoIHNlbGYuY29ubmVjdGlvbklkICk7XHJcblxyXG5cdFx0XHRcdC8vIENoZWNrIGZvciBhbnkgcGVuZGluZyBtZXNzYWdlc1xyXG5cdFx0XHRcdHNlbGYuc2VuZFBlbmRpbmdNZXNzYWdlcygpO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdHZhciBvblNvY2tldE1lc3NhZ2UgPSBmdW5jdGlvbihlOmFueSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRyeVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHZhciBlcnJvclByZWZpeCA9ICdKU09OIFBhcnNlIEVycm9yOiAnO1xyXG5cdFx0XHRcdFx0dmFyIHJlc3BvbnNlID0gSlNPTi5wYXJzZSggZS5kYXRhICk7XHJcblx0XHRcdFx0XHRlcnJvclByZWZpeCA9ICcnO1xyXG5cclxuXHRcdFx0XHRcdHZhciByZXNwb25zZVR5cGUgPSByZXNwb25zZVsgJ3R5cGUnIF07XHJcblx0XHRcdFx0XHRpZiggcmVzcG9uc2VUeXBlID09ICdyZXNldCcgKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHQvLyBJZ25vcmUgKHNob3VsZCBub3QgaGFwcGVuPylcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2UgaWYoIHJlc3BvbnNlVHlwZSA9PSAnbG9nb3V0JyApXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gc2VsZi5sb2dvdXRVcmw7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIGlmKCByZXNwb25zZVR5cGUgPT0gJ21lc3NhZ2VzJyApXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHZhciBtZXNzYWdlc0xpc3QgPSByZXNwb25zZVsgJ21lc3NhZ2VzJyBdO1xyXG5cdFx0XHRcdFx0XHRmb3IoIHZhciBpPTA7IGk8bWVzc2FnZXNMaXN0Lmxlbmd0aDsgKytpIClcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHRyeVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdHZhciBtZXNzYWdlQ29udGVudCA9IG1lc3NhZ2VzTGlzdFsgaSBdO1xyXG5cdFx0XHRcdFx0XHRcdFx0dmFyIHR5cGUgPSBtZXNzYWdlQ29udGVudFsgJ3R5cGUnIF07XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0aWYoIHNlbGYuZGVidWcgKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyggJ21lc3NhZ2UgcmVjdicsIG1lc3NhZ2VDb250ZW50ICk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi50cmlnZ2VyKCB0eXBlLCBtZXNzYWdlQ29udGVudCApO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRjYXRjaCggZXJyIClcclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBUaGUgYXNzaWduZWQgbWVzc2FnZSBoYW5kbGVyIHRocmV3IGFuIGV4Y2VwdGlvblxyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi50cmlnZ2VyTWVzc2FnZUhhbmRsZXJGYWlsZWQoIGVyciApO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR0aHJvdyAnVW5rbm93biByZXNwb25zZSB0eXBlIFwiJyArIHJlc3BvbnNlVHlwZSArICdcIic7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNhdGNoKCBlcnIgKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHNlbGYudHJpZ2dlckludGVybmFsRXJyb3IoIGVycm9yUHJlZml4K2VyciApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHJcblx0XHRzZWxmLnN0YXJ0ID0gZnVuY3Rpb24oKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoIHNlbGYuZGVidWcgKVxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coICdXZWJTb2NrZXQgY29ubmVjdGluZyBcIicrc2VsZi5oYW5kbGVyVXJsKydcIicgKTtcclxuXHRcdFx0XHRzZWxmLndlYlNvY2tldCA9IG5ldyBXZWJTb2NrZXQoIHNlbGYuaGFuZGxlclVybCApO1xyXG5cdFx0XHRcdHNlbGYud2ViU29ja2V0Lm9uZXJyb3IgPSBvblNvY2tldEVycm9yO1xyXG5cdFx0XHRcdHNlbGYud2ViU29ja2V0Lm9uY2xvc2UgPSBvblNvY2tldENsb3NlO1xyXG5cdFx0XHRcdHNlbGYud2ViU29ja2V0Lm9ubWVzc2FnZSA9IG9uU29ja2V0TWVzc2FnZUluaXQ7XHJcblx0XHRcdFx0c2VsZi53ZWJTb2NrZXQub25vcGVuID0gZnVuY3Rpb24oKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR2YXIgbWVzc2FnZSA9IHsgJ3R5cGUnIDogJ2luaXQnIH07XHJcblx0XHRcdFx0XHRcdGlmKCBzZWxmLmRlYnVnIClcclxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyggJ21lc3NhZ2Ugc2VuZCcsIG1lc3NhZ2UgKTtcclxuXHRcdFx0XHRcdFx0Ly8gU2VuZCBpbml0IG1lc3NhZ2VcclxuXHRcdFx0XHRcdFx0c2VsZi53ZWJTb2NrZXQuc2VuZCggSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkgKTtcclxuXHRcdFx0XHRcdH07XHJcblx0XHRcdH07XHJcblxyXG5cdFx0c2VsZi5jaGVja0tlZXBBbGl2ZVRpbWVvdXQgPSBmdW5jdGlvbigpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiggc2VsZi5rZWVwQWxpdmVVcmwgPT0gbnVsbCApXHJcblx0XHRcdFx0XHQvLyBOb3RoaW5nIHRvIGRvXHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0XHRcdGlmKCBzZWxmLmdldFN0YXR1cygpID09IENsaWVudFN0YXR1cy5DT05ORUNURUQgKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGlmKCBzZWxmLmtlZXBBbGl2ZVRpbWVyICE9IG51bGwgKVxyXG5cdFx0XHRcdFx0XHQvLyBBIHRpbWVyIGlzIGFscmVhZHkgcnVubmluZyA9PiBOT09QXHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHJcblx0XHRcdFx0XHQvLyBTdGFydCB0aGUgdGltZXJcclxuXHRcdFx0XHRcdHNlbGYua2VlcEFsaXZlVGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHQvLyBEZWFjdGl2YXRlIGN1cnJlbnQgdGltZXJcclxuXHRcdFx0XHRcdFx0XHRzZWxmLmtlZXBBbGl2ZVRpbWVyID0gbnVsbDtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gU2VuZCBrZWVwYWxpdmUgcmVxdWVzdFxyXG5cdFx0XHRcdFx0XHRcdHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHRcdFx0XHRcdFx0XHRyZXEub3BlbiggJ0dFVCcsIHNlbGYua2VlcEFsaXZlVXJsICk7XHJcblx0XHRcdFx0XHRcdFx0cmVxLnNlbmQoKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gUmVhY3RpdmF0ZSB0aW1lclxyXG5cdFx0XHRcdFx0XHRcdHNlbGYuY2hlY2tLZWVwQWxpdmVUaW1lb3V0KCk7XHJcblx0XHRcdFx0XHRcdH0sIHNlbGYua2VlcEFsaXZlVGltZW91dCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0aWYoIHNlbGYua2VlcEFsaXZlVGltZXIgIT0gbnVsbCApXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdC8vIEEgdGltZXIgaXMgcnVubmluZyA9PiBTdG9wIGl0XHJcblx0XHRcdFx0XHRcdHZhciB0bSA9IHNlbGYua2VlcEFsaXZlVGltZXI7XHJcblx0XHRcdFx0XHRcdHNlbGYua2VlcEFsaXZlVGltZXIgPSBudWxsO1xyXG5cdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQoIHRtICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdHNlbGYuc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbihtZXNzYWdlOk1lc3NhZ2UsIGNhbGxiYWNrPzooZXZ0PzphbnksbWVzc2FnZT86TWVzc2FnZSk9PnZvaWQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRzZWxmLnBlbmRpbmdNZXNzYWdlcy5wdXNoKHsgbWVzc2FnZTptZXNzYWdlLCBjYWxsYmFjazpjYWxsYmFjayB9KTtcclxuXHRcdFx0XHRzZWxmLnNlbmRQZW5kaW5nTWVzc2FnZXMoKTtcclxuXHRcdFx0XHRyZXR1cm4gc2VsZjtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRzZWxmLnNlbmRQZW5kaW5nTWVzc2FnZXMgPSBmdW5jdGlvbigpIDogdm9pZFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoIHNlbGYuZ2V0U3RhdHVzKCkgIT0gQ2xpZW50U3RhdHVzLkNPTk5FQ1RFRCApXHJcblx0XHRcdFx0XHQvLyBDb25uZWN0aW9uIG5vdCByZWFkeVxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cclxuXHRcdFx0XHR2YXIgaXRlbXMgPSBzZWxmLnBlbmRpbmdNZXNzYWdlcztcclxuXHRcdFx0XHRzZWxmLnBlbmRpbmdNZXNzYWdlcyA9IFtdO1xyXG5cclxuXHRcdFx0XHRmb3IoIHZhciBpPTA7IGk8aXRlbXMubGVuZ3RoOyArK2kgKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHRyeVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR2YXIgbWVzc2FnZVx0XHQ9IGl0ZW1zW2ldLm1lc3NhZ2U7XHJcblx0XHRcdFx0XHRcdHZhciBjYWxsYmFja1x0PSBpdGVtc1tpXS5jYWxsYmFjaztcclxuXHJcblx0XHRcdFx0XHRcdGlmKCBjYWxsYmFjayAhPSBudWxsIClcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdC8vIEF0dGFjaCB0aGUgY2FsbGJhY2sgdG8gYSBuZXcgb25lLXNob3QgbWVzc2FnZSBoYW5kbGVyXHJcblx0XHRcdFx0XHRcdFx0dmFyIHJlcGx5TWVzc2FnZUhhbmRsZXIgPSAnbWVzc2FnZV9oYW5kbGVyX2F1dG9yZXBseV8nICsgKCsrIHNlbGYuc2VuZE1lc3NhZ2VVaWQpO1xyXG5cdFx0XHRcdFx0XHRcdG1lc3NhZ2VbICdyZXBseV90b190eXBlJyBdID0gcmVwbHlNZXNzYWdlSGFuZGxlcjtcclxuXHJcblx0XHRcdFx0XHRcdFx0c2VsZi5iaW5kKCByZXBseU1lc3NhZ2VIYW5kbGVyLCBmdW5jdGlvbihldnQsIG1lc3NhZ2UpXHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFRoZSBtZXNzYWdlIGhhcyByZXR1cm5lZCA9PiB1bmJpbmQgdGhlIG9uZS1zaG90IG1lc3NhZ2UgaGFuZGxlclxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnVuYmluZCggcmVwbHlNZXNzYWdlSGFuZGxlciApO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gRm9yd2FyZCB0aGUgbWVzc2FnZSB0byB0aGUgY2FsbGJhY2tcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y2FsbGJhY2soIGV2dCwgbWVzc2FnZSApO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgcm9vdE1lc3NhZ2UgPSB7XHQndHlwZSdcdFx0OiAnbWVzc2FnZXMnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0J21lc3NhZ2VzJ1x0OiBbIG1lc3NhZ2UgXSB9O1xyXG5cclxuXHRcdFx0XHRcdFx0aWYoIHNlbGYuZGVidWcgKVxyXG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCAnbWVzc2FnZSBzZW5kJywgbWVzc2FnZSApO1xyXG5cclxuXHRcdFx0XHRcdFx0dmFyIHN0ck1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeSggcm9vdE1lc3NhZ2UgKTtcclxuXHRcdFx0XHRcdFx0c2VsZi53ZWJTb2NrZXQuc2VuZCggc3RyTWVzc2FnZSApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Y2F0Y2goIGVyciApXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHRyeSB7IHNlbGYudHJpZ2dlckludGVybmFsRXJyb3IoICdVbmFibGUgdG8gc2VuZCBtZXNzYWdlOiAnK2VyciApOyB9IGNhdGNoKGVycikge31cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblxyXG5cdFx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5cdFx0Ly8gQ2hlY2sgVVJMJ3MgcHJvdG9jb2xcclxuXHRcdHZhciB1cmwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnYScgKTtcclxuXHRcdHVybC5ocmVmID0gc2VsZi5oYW5kbGVyVXJsO1xyXG5cdFx0aWYoICh1cmwucHJvdG9jb2wgIT0gJ3dzczonKSAmJiAodXJsLnByb3RvY29sICE9ICd3czonKSApXHJcblx0XHR7XHJcblx0XHRcdGlmKCB1cmwucHJvdG9jb2wgPT0gJ2h0dHBzOicgKVxyXG5cdFx0XHRcdHVybC5wcm90b2NvbCA9ICd3c3M6JztcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHVybC5wcm90b2NvbCA9ICd3czonO1xyXG5cdFx0fVxyXG5cdFx0c2VsZi5oYW5kbGVyVXJsID0gdXJsLmhyZWY7XHJcblx0fVxyXG59ICAvLyBjbGFzcyBXZWJTb2NrZXRDbGllbnRcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFdlYlNvY2tldENsaWVudDtcclxuIiwiXHJcbmltcG9ydCB7IENsaWVudCwgTWVzc2FnZUhhbmRsZXIsIENsaWVudFN0YXR1cyB9IGZyb20gXCIuLi8uLi9Db21tb25MaWJzL1dlYi9Mb25nUG9sbGluZy9KU0NsaWVudC9DbGllbnRcIjtcclxuXHJcbmRlY2xhcmUgZ2xvYmFsXHJcbntcclxuXHRpbnRlcmZhY2UgV2luZG93XHJcblx0e1xyXG5cdFx0aG9tZV9pbmRleF9pbml0IDogKG1lc3NhZ2VIYW5kbGVyUGFyYW1ldGVyczphbnkpPT52b2lkO1xyXG5cdFx0bWVzc2FnZUhhbmRsZXIgOiBNZXNzYWdlSGFuZGxlcjtcclxuXHR9XHJcbn1cclxuXHJcbndpbmRvdy5ob21lX2luZGV4X2luaXQgPSBmdW5jdGlvbiBpbml0KG1lc3NhZ2VIYW5kbGVyUGFyYW1ldGVyczphbnkpXHJcbntcclxuXHR2YXIgbWVzc2FnZUhhbmRsZXIgPSBDbGllbnQoIG1lc3NhZ2VIYW5kbGVyUGFyYW1ldGVycyApXHJcblx0XHRcdFx0XHRcdFx0Lm9uU3RhdHVzQ2hhbmdlZCggKHN0YXR1cyk9PlxyXG5cdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRsZXQgc3RyO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzd2l0Y2goIHN0YXR1cyApXHJcblx0XHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIENsaWVudFN0YXR1cy5DT05ORUNURUQ6XHRzdHIgPSAnQ29ubmVjdGVkJztcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBDbGllbnRTdGF0dXMuRElTQ09OTkVDVEVEOlx0c3RyID0gJ0Rpc2Nvbm5lY3RlZCc7XHRicmVhaztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIENsaWVudFN0YXR1cy5DT05ORUNURUQ6XHRzdHIgPSAnQ29ubmVjdGVkJztcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBDbGllbnRTdGF0dXMuUEVORElORzpcdFx0c3RyID0gJ1BlbmRpbmcnO1x0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIENsaWVudFN0YXR1cy5SVU5OSU5HOlx0XHRzdHIgPSAnUnVubmluZyc7XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdCQoJyNjbGllbnQtc3RhdHVzJykudGV4dCggc3RyICk7XHJcblx0XHRcdFx0XHRcdFx0XHR9IClcclxuXHRcdFx0XHRcdFx0XHQub25JbnRlcm5hbEVycm9yKCAobXNnKT0+XHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFNvbWV0aGluZyB0aGF0IHNob3VsZCBub3QgaGFwcGVuIC4uLlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCAnQW4gaW50ZXJuYWwgZXJyb3Igb2NjdXJlZDonLCBtc2cgKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0gKVxyXG5cdFx0XHRcdFx0XHRcdC5vbk1lc3NhZ2VIYW5kbGVyRmFpbGVkKCAobXNnKT0+XHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFNvbWV0aGluZyB0aGF0IHNob3VsZCBub3QgaGFwcGVuIGVpdGhlciAoZS5nLiBhIEpTT04gcmVzcG9uc2UgY291bGQgbm90IGJlIHBhcnNlZCkgLi4uXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoICdBIG1lc3NhZ2UgaGFuZGxlciBmYWlsZWQ6JywgbXNnICk7XHJcblx0XHRcdFx0XHRcdFx0XHR9IClcclxuXHRcdFx0XHRcdFx0XHQub25Db25uZWN0aW9uSWRSZWNlaXZlZCggKGNvbm5lY3Rpb25JRCk9PlxyXG5cdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBUaGUgY29ubmVjdGlvbiB0byB0aGUgc2VydmVyIGlzIG5vdyBlc3RhYmxpc2hlZFxyXG5cdFx0XHRcdFx0XHRcdFx0fSApO1xyXG5cdG1lc3NhZ2VIYW5kbGVyLmJpbmQoICdleGNlcHRpb24nLCAoZXZ0LG1zZyk9PlxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHQvLyBUaGUgc2VydmVyIHNlbnQgYSBnZW5lcmljIGV4Y2VwdGlvbiBtZXNzYWdlIChlLmcuIGEgbWVzc2FnZSBzZW50IHRvIGFuIGluZXhpc3RlbnQgbWVzc2FnZSBoYW5kbGVyKVxyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCAnVGhlIHNlcnZlciBzZW50IGFuIGV4Y2VwdGlvbjonLCBtc2cgKTtcclxuXHRcdFx0XHRcdH0gKTtcclxuXHRtZXNzYWdlSGFuZGxlci5zdGFydCgpO1xyXG5cclxuXHQvLyBNZXRob2QgMTogU2VuZCBhICdUZXN0VGltZUdldCcgbWVzc2FnZSBldmVyeSBzZWNvbmRzIC4uLlxyXG5cdHNldEludGVydmFsKCBmdW5jdGlvbigpXHJcblx0XHR7XHJcblx0XHRcdGNvbnN0IHJlcXVlc3QgPSB7XHR0eXBlIDogJ1Rlc3RUaW1lR2V0JyxcclxuXHRcdFx0XHRcdFx0XHRcdGluY2x1ZGVFcG9jaCA6IHRydWUgfTtcclxuXHRcdFx0bWVzc2FnZUhhbmRsZXIuc2VuZE1lc3NhZ2UoIHJlcXVlc3QsIChldnQscmVzcG9uc2UpPT5cclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRjb25zdCBzZXJ2ZXJUaW1lID0gYCR7cmVzcG9uc2VbJ3RpbWUnXX0gKFVuaXggZXBvY2g6ICR7cmVzcG9uc2VbJ2Vwb2NoJ119KWA7XHJcblx0XHRcdFx0XHQkKCcjc2VydmVyLXRpbWUtZ2V0JykudGV4dCggc2VydmVyVGltZSApO1xyXG5cdFx0XHRcdH0gKTtcclxuXHRcdH0sIDEwMDAgKTtcclxuXHJcblx0Ly8gTWV0aG9kIDI6IEFzayB0aGUgc2VydmVyIHRvIHB1c2ggdGhlIHRpbWVcclxuXHR7XHJcblx0XHQvLyBSZWdpc3RlciBhIGhhbmRsZXIgZm9yIHRoZSByZXNwb25zZSBtZXNzYWdlc1xyXG5cdFx0bWVzc2FnZUhhbmRsZXIuYmluZCggJ3JlY2VpdmUtdGltZS1mcm9tLXNlcnZlcicsIChldnQscmVzcG9uc2UpPT5cclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNvbnN0IHNlcnZlclRpbWUgPSBgJHtyZXNwb25zZVsndGltZSddfSAoVW5peCBlcG9jaDogJHtyZXNwb25zZVsnZXBvY2gnXX0pIDsgVG8gZ286ICR7cmVzcG9uc2VbJ3JlcGVhdHNUb0dvJ119YDtcclxuXHRcdFx0XHQkKCcjc2VydmVyLXRpbWUtcHVzaCcpLnRleHQoIHNlcnZlclRpbWUgKTtcclxuXHRcdFx0fSApO1xyXG5cclxuXHRcdCQoJyNidG4tdGVzdC1wdXNoJykuY2xpY2soICgpPT5cclxuXHRcdFx0e1xyXG5cdFx0XHRcdC8vIFNlbmQgYSAnVGVzdFRpbWVQdXNoJyBtZXNzYWdlIC4uLlxyXG5cdFx0XHRcdGNvbnN0IHJlcXVlc3QgPSB7XHR0eXBlIDogJ1Rlc3RUaW1lUHVzaCcsXHJcblx0XHRcdFx0XHRcdFx0XHRcdHJlcGx5X3RvX3R5cGUgOiAncmVjZWl2ZS10aW1lLWZyb20tc2VydmVyJywgIC8vIC4uLiBhbmQgcmVjZWl2ZSBpdHMgcmVzcG9uc2UgdG8gdGhlICdyZWNlaXZlLXRpbWUtZnJvbS1zZXJ2ZXInIGhhbmRsZXIgcmVnaXN0ZXJlZCBhYm92ZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXBlYXQgOiAxMCwgIC8vIFB1c2ggMTAgcmVzcG9uc2VzXHJcblx0XHRcdFx0XHRcdFx0XHRcdGluY2x1ZGVFcG9jaCA6IHRydWUgfTtcclxuXHRcdFx0XHRtZXNzYWdlSGFuZGxlci5zZW5kTWVzc2FnZSggcmVxdWVzdCApO1xyXG5cdFx0XHR9ICk7XHJcblx0fVxyXG5cclxuXHQvLyBFeGFtcGxlIHNlcnZlciBleGNlcHRpb25cclxuXHQkKCcjYnRuLXRlc3QtY3Jhc2gnKS5jbGljayggKCk9PlxyXG5cdFx0e1xyXG5cdFx0XHQvLyBTZW5kIGEgJ1Rlc3RDcmFzaCcgbWVzc2FnZVxyXG5cdFx0XHRtZXNzYWdlSGFuZGxlci5zZW5kTWVzc2FnZSggeyB0eXBlIDogJ1Rlc3RDcmFzaCcgfSwgKGV2dCxyZXNwb25zZSk9PlxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdC8vIFVzZSB0aGUgMm5kIHBhcmFtZXRlciB0byBkZWZpbmUgdGhlIHJlc3BvbnNlIGhhbmRsZXIgaW5zdGVhZCBvZiB1c2luZyAnbWVzc2FnZUhhbmRsZXIuYmluZCgpJyBhcyBhYm92ZVxyXG5cdFx0XHRcdFx0Y29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KCByZXNwb25zZSwgbnVsbCwgNCApO1xyXG5cdFx0XHRcdFx0c2hvd1RleHREaWFsb2dNZXNzYWdlKCBqc29uLCAnVGhlIHNlcnZlciByZXNwb25kZWQ6JyApO1xyXG5cdFx0XHRcdH0gKTtcclxuXHRcdH0gKTtcclxuXHJcblx0d2luZG93Lm1lc3NhZ2VIYW5kbGVyID0gbWVzc2FnZUhhbmRsZXI7ICAvLyBOQjogT25seSBzbyBpdCBjYW4gYmUgdXNlZCBmcm9tIHRoZSBKYXZhU2NyaXB0J3MgY29uc29sZVxyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93VGV4dERpYWxvZ01lc3NhZ2UobXNnLCB0aXRsZSlcclxue1xyXG5cdHZhciAkcm9vdCA9ICQoJzxkaXYvPicpLmF0dHIoICd0aXRsZScsIHRpdGxlICk7XHJcblx0aWYoIG1zZyBpbnN0YW5jZW9mIGpRdWVyeSApXHJcblx0XHQkcm9vdC5hcHBlbmQoIG1zZyApO1xyXG5cdGVsc2VcclxuXHRcdCRyb290LmFwcGVuZCggJCgnPHByZS8+JykudGV4dChtc2cpICk7XHJcblx0JChkb2N1bWVudC5ib2R5KS5hcHBlbmQoICRyb290ICk7XHJcblx0JHJvb3QuZGlhbG9nKCk7XHJcbn1cclxuIl19"}